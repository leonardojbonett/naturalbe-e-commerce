<!DOCTYPE html>
<html lang="es">
<head>
  <!-- Google Tag Manager -->
  <script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-M7MF395K');
  </script>
  <!-- End Google Tag Manager -->
  <meta charset="UTF-8">
  <meta name="ga4-id" content="G-DM18HLQ3R8">
  <meta name="meta-pixel-id" content="869358656017955">
  <meta name="p:domain_verify" content="1a26b1491f6ba22b614db7e51c555064">
  <link rel="icon" href="https://naturalbe.com.co/static/img/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" sizes="32x32" href="https://naturalbe.com.co/static/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://naturalbe.com.co/static/img/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="192x192" href="https://naturalbe.com.co/static/img/android-chrome-192x192.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://naturalbe.com.co/static/img/apple-touch-icon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Meta tags adicionales para SEO -->
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="author" content="Natural Be">
  <meta name="keywords" content="suplementos, vitaminas, colageno, omega, magnesio, salud, bienestar, Colombia, natural">
  
  <!-- Open Graph mejorado -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Natural Be | Catálogo de suplementos">
  <meta property="og:description" content="Explora el catálogo de suplementos Natural Be por objetivo, categoría o beneficio.">
  <meta property="og:image" content="https://naturalbe.com.co/static/img/og-naturalbe.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="Natural Be">
  <meta property="og:url" content="https://naturalbe.com.co/category.html">
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Natural Be | Catálogo de suplementos">
  <meta name="twitter:description" content="Explora el catálogo de suplementos Natural Be por objetivo, categoría o beneficio.">
  <meta name="twitter:image" content="https://naturalbe.com.co/static/img/og-naturalbe.jpg">

  <title>Natural Be | Catálogo de suplementos</title>
  <meta name="description" content="Explora el catálogo de suplementos Natural Be. Filtra por objetivo, categoría o beneficio y encuentra la mejor opción para ti.">
  <link rel="canonical" href="https://naturalbe.com.co/category.html">
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Inicio",
        "item": "https://naturalbe.com.co/"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Catálogo",
        "item": "https://naturalbe.com.co/category.html"
      }
    ]
  }
  </script>

  <link rel="preconnect" href="https://wa.me">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* Critical CSS para evitar FOUC */
    body{font-family:'Plus Jakarta Sans',sans-serif;line-height:1.5;margin:0}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
  <script>
    window.NB_VERSION = "2026-01-11";
    window.NB_DATA_VERSION = window.NB_VERSION;
  </script>
  <link rel="preload" href="/static/css/main.min.css?v=2026-01-11" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="/static/css/main.min.css?v=2026-01-11"></noscript>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "¿Cuánto tarda el envío?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Los envíos en Colombia tardan 24 a 48 horas hábiles después de confirmar el pago."
        }
      },
      {
        "@type": "Question",
        "name": "¿Cuánto cuesta el envío?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "El envío cuesta $15.000 COP según destino y transportadora. Envío gratis desde $100.000 COP."
        }
      },
      {
        "@type": "Question",
        "name": "¿Cómo funcionan las devoluciones?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Puedes solicitar devolución o cambio hasta 5 días calendario después de la entrega, siempre que el producto esté sellado y sin uso."
        }
      }
    ]
  }
  </script>
</head>
<body class="marketplace">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M7MF395K"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div class="promo-bar" id="promoBar" aria-live="polite">
    <span class="promo-icon">●</span>
    <span class="promo-message" id="promoMessage">Envíos 24-48h en Colombia · Envío gratis desde $100.000 · Pagos seguros con Wompi · Asesoría por WhatsApp</span>
    <button class="promo-close" type="button" onclick="closePromoBar()" aria-label="Cerrar promoción">×</button>
  </div>

  <header class="market-header" role="banner">
    <div class="market-header__top">
      <div class="market-brand">
        <a class="brand-logo" href="/index.html" aria-label="Natural Be - Inicio">
          <img src="/static/img/logo.webp" alt="Natural Be" width="48" height="48" loading="lazy" decoding="async">
          <span>Natural Be</span>
        </a>
        <button id="menuToggle" class="hamburger-btn" type="button" aria-label="Abrir menú" aria-haspopup="dialog" aria-expanded="false" aria-controls="mobileMenu">Menú</button>
      </div>

      <form class="market-search" data-search-form>
        <label class="sr-only" for="siteSearch">Buscar</label>
        <input id="siteSearch" type="search" placeholder="Buscar suplementos, marcas o objetivos">
        <button type="submit" class="search-btn" aria-label="Buscar">
          <span class="sr-only">Buscar</span>
          <svg class="search-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M11 4a7 7 0 1 1 0 14 7 7 0 0 1 0-14Zm0-2a9 9 0 1 0 5.6 16.1l4.6 4.6a1 1 0 0 0 1.4-1.4l-4.6-4.6A9 9 0 0 0 11 2Z"></path>
          </svg>
        </button>
      </form>

      <div class="market-actions">
        <a class="market-action-link" href="/index.html">Inicio</a>
        <a class="market-action-link" href="/sobre-natural-be.html">Confianza</a>
        <a class="market-action-pill" href="https://wa.me/573137212923?utm_source=naturalbe&utm_medium=website&utm_campaign=retail&utm_content=nav_whatsapp" id="navWhatsappLink" data-wa-content="nav_whatsapp" target="_blank" rel="noopener">WhatsApp</a>
        <button class="market-action-pill" type="button" data-cart-trigger>
          Carrito
          <span class="cart-badge">0</span>
        </button>
      </div>
    </div>

    <div class="market-header__nav">
      <div class="mega-wrapper">
        <button class="mega-toggle" type="button" data-mega-toggle aria-expanded="false" aria-controls="megaMenu">Categorías</button>
        <div class="mega-menu" id="megaMenu" data-mega-menu aria-hidden="true" hidden>
          <div class="mega-column">
            <h4>Comprar por objetivo</h4>
            <a href="/objetivo-energia.html">Energía & rendimiento</a>
            <a href="/objetivo-inmunidad.html">Inmunidad</a>
            <a href="/objetivo-piel.html">Piel & colágeno</a>
            <a href="/objetivo-estres.html">Estrés & sueño</a>
          </div>
          <div class="mega-column">
            <h4>Suplementos</h4>
            <a href="/catalogo-vitaminas.html">Vitaminas</a>
            <a href="/catalogo-minerales.html">Minerales</a>
            <a href="/catalogo-omega.html">Omega & aceites</a>
            <a href="/catalogo-colageno.html">Colágeno</a>
          </div>
<div class="mega-column">
  <h4>Explorar</h4>
  <a href="/catalogo-energia.html">Energía diaria</a>
  <a href="/catalogo-inmunidad.html">Defensas</a>
  <a href="/catalogo-suplementos.html">Todos los suplementos</a>
  <a href="/catalogo-botanitas.html">Marca Botanitas</a>
<a href="/catalogo-satibo.html">Marca Satibo</a>
  <a href="/category.html?brand=nutramerican">Marca Nutramerican</a>
  <a href="/blog.html">Blog</a>
</div>
<div class="mega-column">
  <h4>Más categorías</h4>
  <a href="/catalogo-antioxidantes.html">Antioxidantes</a>
  <a href="/catalogo-huesos.html">Huesos y articulaciones</a>
  <a href="/catalogo-cabello.html">Cabello</a>
  <a href="/catalogo-digestivos.html">Digestivos</a>
  <a href="/catalogo-cuidado-piel.html">Cuidado piel</a>
  <a href="/catalogo-cuidado-intimo.html">Cuidado íntimo</a>
</div>
        </div>
      </div>
      <nav class="market-links" aria-label="Navegación rápida">
        <a href="/index.html#top-ventas">Top ventas</a>
        <a href="/index.html#ofertas">Ofertas</a>
        <a href="/index.html#nuevos">Nuevos</a>
        <a href="/index.html#categorias">Categorías</a>
        <a href="/index.html#proceso">Cómo comprar</a>
      </nav>
      <div class="market-socials" aria-label="Redes sociales Natural Be">
        <a href="https://www.facebook.com/NaturalBeColombia" target="_blank" rel="noopener" aria-label="Facebook Natural Be">
          <svg class="social-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M13.5 9.5V8.1c0-.7.4-1.1 1.3-1.1h1.6V4.2h-2.2C11.7 4.2 10.5 5.6 10.5 8v1.5H8.8v2.7h1.7V20h3V12.2h2.1l.4-2.7h-2.5Z"></path>
          </svg>
        </a>
        <a href="https://www.instagram.com/naturalbe__/" target="_blank" rel="noopener" aria-label="Instagram Natural Be">
          <svg class="social-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M7.5 4.5h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-9a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3Zm9 1.8h-9A1.2 1.2 0 0 0 6.3 7.5v9c0 .7.5 1.2 1.2 1.2h9c.7 0 1.2-.5 1.2-1.2v-9c0-.7-.5-1.2-1.2-1.2ZM12 8.1a3.9 3.9 0 1 1 0 7.8 3.9 3.9 0 0 1 0-7.8Zm0 1.8a2.1 2.1 0 1 0 0 4.2 2.1 2.1 0 0 0 0-4.2Zm4.2-.9a.9.9 0 1 1 0 1.8.9.9 0 0 1 0-1.8Z"></path>
          </svg>
        </a>
        <a href="https://co.pinterest.com/naturalbetutiendasaludable" target="_blank" rel="noopener" aria-label="Pinterest Natural Be">
          <svg class="social-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M12.1 4.5c-3.8 0-6.6 2.7-6.6 6.1 0 2.5 1.5 4.6 3.6 5.4.3.1.5 0 .6-.3l.3-1.2c.1-.2 0-.3-.2-.5-.7-.7-1.1-1.6-1.1-2.8 0-2.3 1.7-4.4 4.5-4.4 2.4 0 3.8 1.6 3.8 3.6 0 2.7-1.3 4.6-3.1 4.6-1 0-1.8-.8-1.5-1.9l.5-2.1c.3-1-.2-1.8-1.1-1.8-.9 0-1.7 1-1.7 2.3 0 .8.3 1.4.3 1.4l-1.2 5a7.2 7.2 0 0 0 .1 2.1.3.3 0 0 0 .6 0c.1-.2.7-1.8.9-2.5l.5-2c.4.7 1.5 1.4 2.7 1.4 3.6 0 6-3.2 6-7.2 0-3.7-3.1-6.3-6.9-6.3Z"></path>
          </svg>
        </a>
      </div>
    </div>
  </header>

  <div id="menuOverlay" class="menu-overlay" tabindex="-1" aria-hidden="true"></div>
  <div id="mobileMenu" class="mobile-menu" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="mobileMenuTitle">
    <div class="mobile-menu-header">
      <h2 id="mobileMenuTitle" class="sr-only">Menú principal</h2>
      <button class="mobile-menu-close" type="button" onclick="toggleMobileMenu(true)" aria-label="Cerrar menú">×</button>
    </div>
    <nav class="nav-mobile" aria-label="Navegación principal">
      <a href="/index.html#inicio">Inicio</a>
      <a href="/catalogo-suplementos.html">Catálogo</a>
      <a href="/index.html#top-ventas">Top ventas</a>
      <a href="/index.html#ofertas">Ofertas</a>
      <a href="/index.html#nuevos">Nuevos</a>
      <a href="/index.html#categorias">Categorías</a>
      <a href="/index.html#proceso">Cómo comprar</a>
      <a href="/envios.html">Envíos</a>
      <a href="/devoluciones.html">Devoluciones</a>
      <a href="/catalogo-botanitas.html">Marca Botanitas</a>
  <a href="/blog.html">Blog</a>
      <a href="https://wa.me/573137212923?utm_source=naturalbe&utm_medium=website&utm_campaign=retail&utm_content=menu_whatsapp" id="menuWhatsappLink" data-wa-content="menu_whatsapp" target="_blank" rel="noopener">WhatsApp</a>
          <div class="market-socials market-socials--mobile" aria-label="Redes sociales Natural Be">
        <a href="https://www.facebook.com/NaturalBeColombia" target="_blank" rel="noopener" aria-label="Facebook Natural Be">
          <svg class="social-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M13.5 9.5V8.1c0-.7.4-1.1 1.3-1.1h1.6V4.2h-2.2C11.7 4.2 10.5 5.6 10.5 8v1.5H8.8v2.7h1.7V20h3V12.2h2.1l.4-2.7h-2.5Z"></path>
          </svg>
        </a>
        <a href="https://www.instagram.com/naturalbe__/" target="_blank" rel="noopener" aria-label="Instagram Natural Be">
          <svg class="social-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M7.5 4.5h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-9a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3Zm9 1.8h-9A1.2 1.2 0 0 0 6.3 7.5v9c0 .7.5 1.2 1.2 1.2h9c.7 0 1.2-.5 1.2-1.2v-9c0-.7-.5-1.2-1.2-1.2ZM12 8.1a3.9 3.9 0 1 1 0 7.8 3.9 3.9 0 0 1 0-7.8Zm0 1.8a2.1 2.1 0 1 0 0 4.2 2.1 2.1 0 0 0 0-4.2Zm4.2-.9a.9.9 0 1 1 0 1.8.9.9 0 0 1 0-1.8Z"></path>
          </svg>
        </a>
        <a href="https://co.pinterest.com/naturalbetutiendasaludable" target="_blank" rel="noopener" aria-label="Pinterest Natural Be">
          <svg class="social-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M12.1 4.5c-3.8 0-6.6 2.7-6.6 6.1 0 2.5 1.5 4.6 3.6 5.4.3.1.5 0 .6-.3l.3-1.2c.1-.2 0-.3-.2-.5-.7-.7-1.1-1.6-1.1-2.8 0-2.3 1.7-4.4 4.5-4.4 2.4 0 3.8 1.6 3.8 3.6 0 2.7-1.3 4.6-3.1 4.6-1 0-1.8-.8-1.5-1.9l.5-2.1c.3-1-.2-1.8-1.1-1.8-.9 0-1.7 1-1.7 2.3 0 .8.3 1.4.3 1.4l-1.2 5a7.2 7.2 0 0 0 .1 2.1.3.3 0 0 0 .6 0c.1-.2.7-1.8.9-2.5l.5-2c.4.7 1.5 1.4 2.7 1.4 3.6 0 6-3.2 6-7.2 0-3.7-3.1-6.3-6.9-6.3Z"></path>
          </svg>
        </a>
      </div>
</nav>
  </div>

  <main class="page-shell">
    <noscript>
      <div class="catalog-alert">
        <span>Activa JavaScript para ver el catalogo completo.</span>
        <a class="btn-ghost" href="/index.html">Volver al inicio</a>
      </div>
    </noscript>
    <nav class="breadcrumb" aria-label="Ruta de navegación">
      <a href="/index.html">Inicio</a>
      <span aria-hidden="true">/</span>
      <span aria-current="page">Catálogo</span>
    </nav>

    <section class="page-shell" style="margin-top:1.5rem;">
      <h2 class="section-title">Explora por categorías populares</h2>
      <p class="section-subtitle">Atajos rápidos a las líneas más buscadas en Colombia.</p>
      <div class="category-grid">
        <a class="category-tile" href="/catalogo-vitaminas.html">
          <strong>Vitaminas</strong>
          <span>Energía diaria y defensas.</span>
        </a>
        <a class="category-tile" href="/catalogo-omega.html">
          <strong>Omega & aceites</strong>
          <span>Corazón, mente y articulaciones.</span>
        </a>
        <a class="category-tile" href="/catalogo-colageno.html">
          <strong>Colágeno</strong>
          <span>Piel, cabello y elasticidad.</span>
        </a>
        <a class="category-tile" href="/catalogo-minerales.html">
          <strong>Minerales</strong>
          <span>Magnesio, zinc y balances clave.</span>
        </a>
      </div>
      <div class="brand-feature">
        <div>
          <span class="eyebrow">Marca destacada</span>
          <h3>Funat en Natural Be</h3>
          <p>Explora los suplementos Funat con envío rápido en Colombia.</p>
        </div>
        <a class="btn-primary" href="/category.html?brand=funat&category=vitaminas">Ver Funat en Vitaminas</a>
      </div>
    </section>
    <section class="hero-market" style="margin-top:1.5rem;">
      <div>
        <p class="section-subtitle">Catálogo Natural Be</p>
        <h1>Encuentra el suplemento ideal para tu objetivo</h1>
        <p>Filtra por beneficio, categoría o promoción. Guarda tus favoritos y compra con pagos seguros.</p>
      </div>
      <div class="trust-card" data-shipping-widget="compact"></div>
    </section>

    <div class="catalog-status" id="catalogStatus" role="status"></div>
    <div class="search-summary" id="searchSummary"></div>
    <div class="plp-toolbar">
      <div>
        <h2 class="section-title">Resultados <span class="results-total" id="resultsTotal"></span></h2>
        <p class="section-subtitle" id="resultsCount"></p>
      </div>
    <div class="plp-toolbar-actions">
      <label for="sortSelect">Ordenar:</label>
      <select id="sortSelect">
        <option value="featured">Destacados</option>
        <option value="price-asc">Precio menor a mayor</option>
        <option value="price-desc">Precio mayor a menor</option>
        <option value="name">Nombre A-Z</option>
      </select>
      <label for="pageLimit" class="limit-label">Por página:</label>
      <select id="pageLimit">
        <option value="12">12</option>
        <option value="18">18</option>
        <option value="24" selected>24</option>
        <option value="48">48</option>
      </select>
    </div>
    </div>

    <div class="plp-layout">
        <aside class="filters-panel">
          <div class="filter-group">
            <h4>Buscar</h4>
            <input type="search" id="filterSearch" placeholder="Marca, producto, beneficio">
          </div>
          <div class="filter-group">
            <h4>Marca</h4>
            <select id="filterBrand">
              <option value="all">Todas</option>
            </select>
            <div class="filter-quick">
              <button type="button" class="chip" id="quickBrandFunat" aria-label="Filtrar por marca Funat">Funat</button>
              <button type="button" class="chip" id="quickBrandFunatVitamins" aria-label="Filtrar Funat en Vitaminas">Funat · Vitaminas</button>
              <button type="button" class="chip" id="quickBrandNutramerican" aria-label="Filtrar por marca Nutramerican">Nutramerican</button>
            </div>
          </div>
          <div class="filter-group">
            <h4>Categoría</h4>
            <select id="filterCategory">
              <option value="all">Todas</option>
            <option value="vitaminas">Vitaminas</option>
            <option value="minerales">Minerales</option>
            <option value="omega">Omega & aceites</option>
            <option value="colageno">Colágeno</option>
            <option value="energia">Energía</option>
            <option value="inmunidad">Inmunidad</option>
          </select>
        </div>
        <div class="filter-group">
          <h4>Objetivo</h4>
          <select id="filterObjective">
            <option value="all">Todos</option>
            <option value="energia">Energía & rendimiento</option>
            <option value="inmunidad">Inmunidad</option>
            <option value="piel">Piel & colágeno</option>
            <option value="estres">Estrés & sueño</option>
          </select>
        </div>
        <div class="filter-group">
          <h4>Precio</h4>
          <select id="filterPrice">
            <option value="all">Todos</option>
            <option value="0-50000">Hasta $50.000</option>
            <option value="50000-100000">$50.000 - $100.000</option>
            <option value="100000-999999">Más de $100.000</option>
          </select>
        </div>
        <div class="filter-group">
          <h4>Destacados</h4>
          <label><input type="checkbox" id="filterSale"> En oferta</label>
          <label><input type="checkbox" id="filterPopular"> Más vendidos</label>
          <label><input type="checkbox" id="filterNew"> Nuevos</label>
        </div>
        <button class="btn-ghost" type="button" id="filterReset">Restablecer filtros</button>
      </aside>

      <section>
    <div class="product-grid" id="plpGrid" data-image-status="#catalogStatus"></div>
    <div class="pagination-wrap">
      <div class="pagination-status" id="paginationStatus" aria-live="polite"></div>
      <div class="pagination-range" id="paginationRange" aria-live="polite"></div>
      <div class="pagination-count" id="paginationCount" aria-live="polite"></div>
      <nav id="pagination" class="pagination" aria-label="Paginación del catálogo"></nav>
    </div>
      </section>
    </div>
      <section class="page-shell" style="margin-top:1.5rem;">
      <h2 class="section-title">Preguntas frecuentes</h2>
      <div class="faq-grid">
        <div class="faq-card">
          <h3>¿Cuánto tarda el envío?</h3>
          <p>Los envíos en Colombia tardan 24 a 48 horas hábiles después de confirmar el pago.</p>
        </div>
        <div class="faq-card">
          <h3>¿Cuánto cuesta el envío?</h3>
          <p>El envío cuesta $15.000 COP según destino y transportadora. Envío gratis desde $100.000 COP.</p>
        </div>
        <div class="faq-card">
          <h3>¿Cómo funcionan las devoluciones?</h3>
          <p>Puedes solicitar devolución o cambio hasta 5 días calendario después de la entrega, siempre que el producto esté sellado y sin uso.</p>
        </div>
      </div>
    </section>
</main>

  <a href="https://wa.me/573137212923?text=Hola!%20Quiero%20información%20sobre%20los%20productos%20de%20Natural%20Be&utm_source=naturalbe&utm_medium=website&utm_campaign=retail&utm_content=float_whatsapp"
     class="whatsapp-float" id="floatWhatsappLink" data-wa-content="float_whatsapp" target="_blank" aria-label="Contactar por WhatsApp">WA</a>

  <button class="cart-float" type="button" aria-label="Ver carrito de compras" aria-controls="cartModal" aria-expanded="false" data-cart-trigger>
    Carrito
    <span class="cart-badge">0</span>
  </button>

  <div class="cart-modal" id="cartModal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="cartTitle" aria-describedby="cartDesc" onclick="closeCartOnOutsideClick(event)">
    <div class="cart-content" onclick="event.stopPropagation()" tabindex="-1">
      <div class="cart-header">
        <h2 class="cart-title" id="cartTitle">Mi carrito</h2>
        <p class="sr-only" id="cartDesc">Revisa productos, ajusta cantidades y finaliza compra por WhatsApp o Wompi.</p>
        <button class="cart-close" type="button" onclick="toggleCart()" aria-label="Cerrar carrito">×</button>
      </div>
      <div class="cart-body" id="cartBody"></div>
      <div class="recommended-block" id="recommendedContainer" aria-live="polite"></div>
      <div class="cart-footer" id="cartFooter">
        <div class="cart-total">
          <span class="cart-total-label">Total:</span>
          <span class="cart-total-amount" id="cartTotal">$0</span>
        </div>
        <button class="cart-checkout-btn" onclick="checkoutWhatsApp()">Finalizar compra por WhatsApp</button>
        <button class="cart-clear-btn" onclick="clearCart()">Vaciar carrito</button>
        <div class="alt-payment">
          <p class="alt-payment-text">También puedes pagar con Wompi desde aquí.</p>
          <button class="alt-payment-btn" type="button" onclick="checkoutWompi()">Pagar con Wompi</button>
        </div>
      </div>
    </div>
  </div>

  <footer class="footer-market">
    <div class="page-shell footer-grid">
      <div>
        <h3>Natural Be</h3>
        <p>Suplementos confiables para energía, inmunidad y bienestar integral.</p>
      </div>
      <div>
        <h4>Categorías</h4>
        <ul class="footer-links">
  <li><a href="/catalogo-vitaminas.html">Vitaminas</a></li>
  <li><a href="/catalogo-minerales.html">Minerales</a></li>
  <li><a href="/catalogo-omega.html">Omega & aceites</a></li>
  <li><a href="/catalogo-colageno.html">Colageno</a></li>
          <li><a href="/catalogo-energia.html">Energía</a></li>
  <li><a href="/catalogo-inmunidad.html">Inmunidad</a></li>
  <li><a href="/catalogo-antioxidantes.html">Antioxidantes</a></li>
  <li><a href="/catalogo-huesos.html">Huesos</a></li>
  <li><a href="/catalogo-cabello.html">Cabello</a></li>
  <li><a href="/catalogo-digestivos.html">Digestivos</a></li>
  <li><a href="/catalogo-cuidado-piel.html">Cuidado piel</a></li>
          <li><a href="/catalogo-cuidado-intimo.html">Cuidado íntimo</a></li>
  <li><a href="/catalogo-cuidado-adulto.html">Cuidado adulto</a></li>
  <li><a href="/catalogo-antisepticos.html">Antisepticos</a></li>
  <li><a href="/catalogo-medicamentos.html">Medicamentos</a></li>
  <li><a href="/catalogo-botanitas.html">Marca Botanitas</a></li>
  <li><a href="/catalogo-satibo.html">Marca Satibo</a></li>
  <li><a href="/catalogo-suplementos.html">Todos los suplementos</a></li>
</ul>
      </div>
      <div>
        <h4>Soporte</h4>
        <ul class="footer-links">
          <li><a href="/envios.html">Envíos</a></li>
          <li><a href="/devoluciones.html">Devoluciones</a></li>
          <li><a href="/terminos.html">Términos y condiciones</a></li>
          <li><a href="/privacidad.html">Política de privacidad</a></li>
          <li><a href="/sobre-natural-be.html">Sobre Natural Be</a></li>
        </ul>
      </div>
      <div>
        <h4>Contacto</h4>
        <p>Barranquilla, Atlántico, Colombia</p>
        <p>WhatsApp: +57 313 721 2923</p>
        <a href="https://wa.me/573137212923?utm_source=naturalbe&utm_medium=website&utm_campaign=retail&utm_content=footer_whatsapp" id="footerWhatsappLink" data-wa-content="footer_whatsapp" target="_blank" rel="noopener">Escríbenos</a>
      </div>
    </div>
  </footer>

  <!-- Scripts Esenciales -->
  <script src="/static/js/nb-core.js" defer></script>
  <script src="/static/js/promo.js" defer></script>
  <script src="/static/js/marketplace.js?v=2026-01-13" defer></script>
  <script>
    // FIX: sincronizar offset del header con la promo bar
    window.addEventListener('load', () => {
      const bar = document.getElementById('promoBar');
      if (!bar) return;
      const height = bar.getBoundingClientRect().height || 0;
      document.documentElement.style.setProperty('--promo-offset', `${height}px`);
    });
  </script>
  <script src="/static/js/products-data.min.js?v=2026-02-07" defer></script>
  <script src="/static/js/search-engine.js?v=2026-02-07" defer></script>
  <script src="/static/js/cart.js?v=2026-02-07" defer></script>
  <script src="/static/js/webp-support.js?v=2026-01-13" defer></script>
  
  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('./sw.js')
          .then(function(registration) {
            registration.update();
          })
          .catch(function(registrationError) {
            // Silent failure - SW not critical
          });
      });
    }
  </script>
  
  <!-- Scripts críticos cargados primero -->
  <script>
    // Funciones críticas inline para mejor rendimiento
    function escapeHtml(value) {
      return String(value || '').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#39;');
    }
    function sanitizeUrl(value) {
      const raw = String(value || '');
      return /^\s*javascript:/i.test(raw) ? '#' : raw;
    }
  </script>
  
  <!-- Carga diferida de scripts no críticos -->
  <script>
    window.addEventListener('load', function() {
      // Cargar scripts secundarios después del load principal
      const scripts = [
        './static/js/wompi-config.js'
      ];
      scripts.forEach(src => {
        const script = document.createElement('script');
        script.src = src;
        script.defer = true;
        document.head.appendChild(script);
      });
    });
  </script>

  <script>
    (function () {
      const filterEls = {
        search: document.getElementById('filterSearch'),
        brand: document.getElementById('filterBrand'),
        category: document.getElementById('filterCategory'),
        objective: document.getElementById('filterObjective'),
      price: document.getElementById('filterPrice'),
      sale: document.getElementById('filterSale'),
      popular: document.getElementById('filterPopular'),
      isNew: document.getElementById('filterNew'),
      sort: document.getElementById('sortSelect'),
      reset: document.getElementById('filterReset')
    };

    const resultCount = document.getElementById('resultsCount');
    const resultsTotal = document.getElementById('resultsTotal');
    const grid = document.getElementById('plpGrid');
    const searchSummary = document.getElementById('searchSummary');
    const catalogStatus = document.getElementById('catalogStatus');
    const paginationNav = document.getElementById('pagination');
      const paginationStatus = document.getElementById('paginationStatus');
      const paginationRange = document.getElementById('paginationRange');
      const paginationCount = document.getElementById('paginationCount');
      const limitSelect = document.getElementById('pageLimit');
      const quickBrandFunat = document.getElementById('quickBrandFunat');
      const quickBrandFunatVitamins = document.getElementById('quickBrandFunatVitamins');
      const quickBrandNutramerican = document.getElementById('quickBrandNutramerican');

    const objectiveMap = {
      energia: ['energia', 'energía', 'rendimiento'],
      inmunidad: ['inmunidad', 'defensas'],
      piel: ['piel', 'colageno', 'colágeno'],
      estres: ['estres', 'estrés', 'sueño', 'relajacion', 'relajación']
    };
    const categoryLabels = {
      vitaminas: 'Vitaminas',
      minerales: 'Minerales',
      omega: 'Omega y aceites',
      colageno: 'Colágeno',
      energia: 'Energía',
      inmunidad: 'Inmunidad'
    };
    const objectiveLabels = {
      energia: 'Energía y rendimiento',
      inmunidad: 'Inmunidad',
      piel: 'Piel y colágeno',
      estres: 'Estrés y sueño'
    };
    const defaultTitle = 'Catálogo de suplementos en Colombia | Natural Be';
    const defaultDescription = 'Explora el catálogo de suplementos Natural Be. Filtra por categoría, objetivo o precio y compra con pagos seguros en Colombia.';

    function normalizeText(value) {
      return String(value || '')
        .toLowerCase()
        .normalize('NFD')                    // Descomponer caracteres acentuados
        .replace(/[\u0300-\u036f]/g, '')     // Remover marcas diacríticas
        .replace(/\s+/g, ' ')                // Normalizar espacios múltiples a uno
        .trim();
    }

    const defaultCategory = normalizeText(window.NB_DEFAULT_CATEGORY || '');
    const defaultObjective = normalizeText(window.NB_DEFAULT_OBJECTIVE || '');

    function matchesObjective(product, objective) {
      if (!objective || objective === 'all') return true;
      const keywords = objectiveMap[objective] || [objective];
      const haystack = [product.categoria, product.subcategoria, ...(product.tags || [])].map(normalizeText).join(' ');
      return keywords.some((key) => haystack.includes(normalizeText(key)));
    }

    window.matchesQuery = function matchesQuery(product, query) {
      if (!query) return true;
      
      const normalizedQuery = normalizeText(query);
      
      // Si la búsqueda es un término simple, usar includes directo
      if (normalizedQuery.split(' ').length === 1) {
        const searchFields = [
          product.nombre,
          product.marca,
          product.categoria,
          product.subcategoria,
          product.descripcion_corta,
          ...(product.tags || [])
        ];
        
        return searchFields.some(field => {
          const normalizedField = normalizeText(field);
          return normalizedField.includes(normalizedQuery);
        });
      }
      
      // Para búsquedas múltiples, usar la lógica avanzada
      const searchTerms = normalizedQuery.split(' ').filter(term => term.length > 1);
      if (searchTerms.length === 0) return true;
      
      const searchFields = [
        { field: product.nombre, weight: 3 },
        { field: product.marca, weight: 2 },
        { field: product.categoria, weight: 3 },
        { field: product.subcategoria, weight: 2 },
        { field: product.descripcion_corta, weight: 1 },
        ...(product.tags || []).map(tag => ({ field: tag, weight: 2 }))
      ];
      
      let totalScore = 0;
      let maxPossibleScore = searchTerms.length * 3;
      
      for (const term of searchTerms) {
        let termScore = 0;
        
        for (const { field, weight } of searchFields) {
          const normalizedField = normalizeText(field);
          
          if (normalizedField.includes(term)) {
            termScore += weight;
            
            if (normalizedField.startsWith(term)) {
              termScore += weight * 0.5;
            }
            
            if (normalizedField === term) {
              termScore += weight * 2;
            }
          }
        }
        
        totalScore += termScore;
      }
      
      const threshold = maxPossibleScore * 0.3;
      return totalScore >= threshold;
    }

    function getChecked(el) {
      return !!(el && el.checked);
    }

    window.applyFilters = function applyFilters(list) {
      const query = getSearchTerm();
      
      const categoryRaw = getInputValue(filterEls.category, 'all');
        const categoryAliases = {
          'omega-y-aceites': 'omega',
          'omega & aceites': 'omega',
          'omega': 'omega',
          'colageno': 'colageno',
          'colágeno': 'colageno'
        };
        const category = categoryAliases[normalizeText(categoryRaw)] || normalizeText(categoryRaw);
        const brand = normalizeText(getInputValue(filterEls.brand, 'all'));
        const objective = getInputValue(filterEls.objective, 'all');
        const price = getInputValue(filterEls.price, 'all');
        const sale = getChecked(filterEls.sale);
        const popular = getChecked(filterEls.popular);
        const isNew = getChecked(filterEls.isNew);
  
        let filtered = list.filter((product) => {
          if (category !== 'all' && normalizeText(product.categoria) !== category) return false;
          if (brand !== 'all' && normalizeText(product.marca) !== brand) return false;
          if (!matchesObjective(product, objective)) return false;
        if (!matchesQuery(product, query)) return false;
        if (sale && !(product.discountPercent > 0 || product.es_2x1 || product.isPack)) return false;
        if (popular && !product.isPopular) return false;
        if (isNew && !product.isNew) return false;
        if (price !== 'all') {
          const [min, max] = price.split('-').map(Number);
          const value = Number(product.precio_oferta || product.precio || 0);
          if (value < min || value > max) return false;
        }
        return true;
      });

      switch (getInputValue(filterEls.sort, 'featured')) {
        case 'price-asc':
          filtered.sort((a, b) => (a.precio_oferta || a.precio) - (b.precio_oferta || b.precio));
          break;
        case 'price-desc':
          filtered.sort((a, b) => (b.precio_oferta || b.precio) - (a.precio_oferta || a.precio));
          break;
        case 'name':
          filtered.sort((a, b) => (a.nombre || '').localeCompare(b.nombre || ''));
          break;
        default:
          break;
      }

      return filtered;
    }

    function escapeHtml(value) {
      return String(value || '')
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#39;');
    }
    function sanitizeUrl(value) {
      const raw = String(value || '');
      if (/^\s*javascript:/i.test(raw)) return '#';
      return raw;
    }
    function debounce(fn, wait = 200) {
      let timer = null;
      return (...args) => {
        if (timer) clearTimeout(timer);
        timer = setTimeout(() => fn(...args), wait);
      };
    }
    function getInputValue(el, fallback = '') {
      return el && typeof el.value !== 'undefined' ? el.value : fallback;
    }
    function getLimitByViewport() {
      if (window.matchMedia('(max-width: 640px)').matches) return 12;
      if (window.matchMedia('(max-width: 980px)').matches) return 18;
      return 24;
    }
    function getLimitFromStorage() {
      const raw = Number(localStorage.getItem('nb_catalog_limit'));
      if ([12, 18, 24, 48].includes(raw)) return raw;
      return null;
    }
    function getLimitFromUrl() {
      const params = new URLSearchParams(window.location.search);
      const raw = Number(params.get('limit'));
      if ([12, 18, 24, 48].includes(raw)) return raw;
      const stored = getLimitFromStorage();
      return stored || getLimitByViewport();
    }
    function applyResponsiveLimitOverride() {
      const params = new URLSearchParams(window.location.search);
      if (params.has('limit')) return;
      const responsiveLimit = getLimitByViewport();
      updateUrlParams({ limit: responsiveLimit }, { replace: true });
      if (limitSelect) limitSelect.value = String(responsiveLimit);
    }
    function getPageFromUrl(totalPages) {
      const params = new URLSearchParams(window.location.search);
      const raw = Number(params.get('page'));
      if (!Number.isFinite(raw) || raw < 1) return 1;
      if (totalPages && raw > totalPages) return totalPages;
      return raw;
    }
    function updateUrlParams(nextParams, options = {}) {
      const { replace = false } = options;
      const params = new URLSearchParams(window.location.search);
      Object.entries(nextParams).forEach(([key, value]) => {
        if (value === null || value === undefined || value === '') {
          params.delete(key);
        } else {
          params.set(key, String(value));
        }
      });
      const query = params.toString();
      const nextUrl = query ? `${window.location.pathname}?${query}` : window.location.pathname;
      if (replace) {
        history.replaceState({}, '', nextUrl);
      } else {
        history.pushState({}, '', nextUrl);
      }
      return params;
    }
    function updateFilterParamsInUrl(options = {}) {
      const params = new URLSearchParams(window.location.search);
      const query = getSearchTerm();
        const category = getInputValue(filterEls.category, 'all');
        const brand = getInputValue(filterEls.brand, 'all');
        const objective = getInputValue(filterEls.objective, 'all');
        if (query) params.set('q', query); else params.delete('q');
        if (category && category !== 'all') params.set('category', category); else params.delete('category');
        if (brand && brand !== 'all') params.set('brand', brand); else params.delete('brand');
        if (objective && objective !== 'all') params.set('objective', objective); else params.delete('objective');
      const queryString = params.toString();
      const nextUrl = queryString ? `${window.location.pathname}?${queryString}` : window.location.pathname;
      if (options.replace) {
        history.replaceState({}, '', nextUrl);
      } else {
        history.pushState({}, '', nextUrl);
      }
      return params;
    }
    function ensurePaginationParams(page, limit) {
      const params = new URLSearchParams(window.location.search);
      const hasPage = params.has('page');
      const hasLimit = params.has('limit');
      if (hasPage && hasLimit) return params;
      if (!hasPage) params.set('page', String(page));
      if (!hasLimit) params.set('limit', String(limit));
      const query = params.toString();
      const nextUrl = query ? `${window.location.pathname}?${query}` : window.location.pathname;
      history.replaceState({}, '', nextUrl);
      return params;
    }
    function scrollToGrid() {
      if (!grid) return;
      grid.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
    function renderPaginationControls(page, totalPages, limit, totalItems, pageItemsCount) {
      if (!paginationNav || !paginationStatus) return;
      if (totalPages <= 1) {
        paginationNav.innerHTML = '';
        paginationStatus.textContent = '';
        if (paginationRange) paginationRange.textContent = '';
        if (paginationCount) paginationCount.textContent = '';
        return;
      }
      paginationStatus.textContent = `Página ${page} de ${totalPages}`;
      if (paginationRange) {
        const start = totalItems ? (page - 1) * limit + 1 : 0;
        const end = totalItems ? Math.min(start + pageItemsCount - 1, totalItems) : 0;
        paginationRange.textContent = totalItems ? `Mostrando ${start}–${end} de ${totalItems}` : '';
      }
      if (paginationCount) {
        paginationCount.textContent = totalItems ? `Total: ${totalItems} productos` : '';
      }
      const isCompact = window.matchMedia('(max-width: 640px)').matches;
      const pages = [];
      const maxVisible = 5;
      const half = Math.floor(maxVisible / 2);
      let start = Math.max(1, page - half);
      let end = Math.min(totalPages, start + maxVisible - 1);
      if (end - start < maxVisible - 1) {
        start = Math.max(1, end - maxVisible + 1);
      }
      if (!isCompact) {
        if (start > 1) pages.push(1);
        if (start > 2) pages.push('ellipsis-start');
        for (let p = start; p <= end; p++) pages.push(p);
        if (end < totalPages - 1) pages.push('ellipsis-end');
        if (end < totalPages) pages.push(totalPages);
      } else {
        pages.push(page);
      }

      const prevDisabled = page <= 1 ? 'disabled' : '';
      const nextDisabled = page >= totalPages ? 'disabled' : '';
      const prevAria = page <= 1 ? 'true' : 'false';
      const nextAria = page >= totalPages ? 'true' : 'false';

      const buttons = [
        `<button class="pagination-btn" data-page="${page - 1}" ${prevDisabled} aria-label="Página anterior" aria-disabled="${prevAria}">Anterior</button>`
      ];

      pages.forEach((item) => {
        if (typeof item === 'string') {
          buttons.push('<span class="pagination-ellipsis" aria-hidden="true">…</span>');
          return;
        }
        const isActive = item === page ? 'is-active' : '';
        const ariaCurrent = item === page ? 'aria-current="page"' : '';
        const label = isCompact ? `Página ${item}` : String(item);
        buttons.push(`<button class="pagination-btn ${isActive}" data-page="${item}" aria-label="Ir a la página ${item}" ${ariaCurrent}>${label}</button>`);
      });

      buttons.push(
        `<button class="pagination-btn" data-page="${page + 1}" ${nextDisabled} aria-label="Página siguiente" aria-disabled="${nextAria}">Siguiente</button>`
      );

      paginationNav.innerHTML = buttons.join('');
      paginationNav.dataset.limit = String(limit);
      paginationNav.dataset.totalPages = String(totalPages);
    }
    function updatePaginationLinks(page, totalPages, limit) {
      const params = new URLSearchParams(window.location.search);
      const origin = window.location.origin || 'https://naturalbe.com.co';
      const base = `${origin}${window.location.pathname}`;
      const canonical = document.querySelector('link[rel="canonical"]');
      if (canonical) {
        const canonicalParams = new URLSearchParams(params.toString());
        if (page > 1) canonicalParams.set('page', String(page)); else canonicalParams.delete('page');
        canonicalParams.set('limit', String(limit));
        const query = canonicalParams.toString();
        canonical.setAttribute('href', query ? `${base}?${query}` : base);
      }
      const setRel = (rel, targetPage) => {
        let link = document.querySelector(`link[rel="${rel}"]`);
        if (targetPage < 1 || targetPage > totalPages) {
          if (link) link.remove();
          return;
        }
        if (!link) {
          link = document.createElement('link');
          link.setAttribute('rel', rel);
          document.head.appendChild(link);
        }
        const paramsRel = new URLSearchParams(params.toString());
        paramsRel.set('limit', String(limit));
        paramsRel.set('page', String(targetPage));
        link.setAttribute('href', `${base}?${paramsRel.toString()}`);
      };
      setRel('prev', page - 1);
      setRel('next', page + 1);
    }
    function getSearchTerm() {
      return filterEls.search && typeof filterEls.search.value === 'string'
        ? filterEls.search.value.trim()
        : '';
    }

      function getSeoContext() {
        return {
          query: getSearchTerm(),
          category: normalizeText(getInputValue(filterEls.category, 'all')),
          objective: normalizeText(getInputValue(filterEls.objective, 'all')),
          brand: normalizeText(getInputValue(filterEls.brand, 'all'))
        };
      }

      function updateCategorySeo(list) {
        const { query, category, objective, brand } = getSeoContext();
      const titleEl = document.querySelector('title');
      const metaDesc = document.querySelector('meta[name="description"]');
      const ogTitle = document.querySelector('meta[property="og:title"]');
      const ogDesc = document.querySelector('meta[property="og:description"]');
      const ogImage = document.querySelector('meta[property="og:image"]');
      const twitterTitle = document.querySelector('meta[name="twitter:title"]');
      const twitterDesc = document.querySelector('meta[name="twitter:description"]');
      const twitterImage = document.querySelector('meta[name="twitter:image"]');
      const canonical = document.querySelector('link[rel="canonical"]');
      const origin = window.location.origin || 'https://naturalbe.com.co';

      let title = defaultTitle;
      let description = defaultDescription;

        if (query) {
          title = `Resultados para "${query}" | Natural Be`;
          description = `Resultados de suplementos para "${query}" en Natural Be. Filtra por categoría, objetivo y precio para encontrar tu mejor opción.`;
        } else if (brand !== 'all') {
          const brandLabel = brand.charAt(0).toUpperCase() + brand.slice(1);
          if (brand === 'funat' && category === 'vitaminas') {
            title = `Funat · Vitaminas en Colombia | Natural Be`;
            description = `Compra vitaminas Funat con envío rápido en Colombia. Descubre productos originales en Natural Be.`;
          } else {
            title = `Suplementos ${brandLabel} en Colombia | Natural Be`;
            description = `Compra suplementos ${brandLabel} con envío rápido en Colombia. Descubre productos originales en Natural Be.`;
          }
        } else if (category !== 'all' || objective !== 'all') {
        const categoryLabel = categoryLabels[category] || category;
        const objectiveLabel = objectiveLabels[objective] || objective;
        if (category !== 'all' && objective !== 'all') {
          title = `Suplementos de ${categoryLabel} para ${objectiveLabel} | Natural Be`;
          description = `Compra suplementos de ${categoryLabel} enfocados en ${objectiveLabel}. Pagos seguros y envíos rápidos en Colombia.`;
        } else if (category !== 'all') {
          title = `Suplementos de ${categoryLabel} en Colombia | Natural Be`;
          description = `Descubre suplementos de ${categoryLabel} con envío rápido en Colombia. Compra fácil y segura en Natural Be.`;
        } else {
          title = `Suplementos para ${objectiveLabel} en Colombia | Natural Be`;
          description = `Encuentra suplementos para ${objectiveLabel} con asesoría personalizada y pagos seguros en Colombia.`;
        }
      }

      if (titleEl) titleEl.textContent = title;
      if (metaDesc) metaDesc.setAttribute('content', description);
      if (ogTitle) ogTitle.setAttribute('content', title);
      if (ogDesc) ogDesc.setAttribute('content', description);
      if (twitterTitle) twitterTitle.setAttribute('content', title);
      if (twitterDesc) twitterDesc.setAttribute('content', description);
      if (ogImage || twitterImage) {
        const imageOverride = (brand === 'funat' && category === 'vitaminas')
          ? 'https://funat.co/wp-content/uploads/2025/02/imuniprobióticos60capsulas_-7706849119547_1_1200x1200_VITAMINASYSUPLEMENTOS_funat_col-300x300.jpg'
          : 'https://naturalbe.com.co/static/img/og-naturalbe.jpg';
        if (ogImage) ogImage.setAttribute('content', imageOverride);
        if (twitterImage) twitterImage.setAttribute('content', imageOverride);
      }
      if (canonical) canonical.setAttribute('href', `${origin}${window.location.pathname}`);

      updateItemListSchema(list);
    }

    function buildItemUrl(product) {
      const origin = window.location.origin || 'https://naturalbe.com.co';
      const slug = product.slug || '';
        const rawUrl = (window.NaturalBe && typeof window.NaturalBe.buildProductURL === 'function')
          ? window.NaturalBe.buildProductURL(product)
          : (slug ? `./product.html?slug=${encodeURIComponent(slug)}` : './product.html');
      try {
        return new URL(rawUrl, origin).href;
      } catch (e) {
        return `${origin}/catalogo-suplementos.html`;
      }
    }

    function updateItemListSchema(list) {
      const existing = document.getElementById('categoryItemList');
      if (existing) existing.remove();
      if (!Array.isArray(list) || !list.length) return;
      const items = list.slice(0, 20).map((product, index) => ({
        "@type": "ListItem",
        "position": index + 1,
        "item": {
          "@type": "Product",
          "name": String(product.nombre || product.name || 'Producto'),
          "url": buildItemUrl(product)
        }
      }));
      const schema = {
        "@context": "https://schema.org",
        "@type": "ItemList",
        "itemListElement": items
      };
      const script = document.createElement('script');
      script.type = 'application/ld+json';
      script.id = 'categoryItemList';
      script.textContent = JSON.stringify(schema);
      document.head.appendChild(script);
    }

    function renderEmptyState(query) {
      const safeQuery = query ? escapeHtml(query) : '';
      grid.innerHTML = `
        <div class="empty-state">
          <h3>No encontramos resultados${safeQuery ? ` para "${safeQuery}"` : ''}.</h3>
          <p>Prueba con otra palabra o explora estas opciones:</p>
          <div class="empty-state-actions">
            <a class="btn-primary" href="/index.html#top-ventas">Ver top ventas</a>
            <a class="btn-ghost" href="/catalogo-suplementos.html">Ver catalogo completo</a>
            <a class="btn-outline" href="https://wa.me/573137212923?utm_source=naturalbe&utm_medium=website&utm_campaign=retail&utm_content=empty_whatsapp" target="_blank" rel="noopener">WhatsApp</a>
          </div>
        </div>
      `;
    }

    function highlightMatches(query) {
      if (!query || query.length < 2) return;
      const escaped = query.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');
      const regex = new RegExp(`(${escaped})`, 'gi');
      grid.querySelectorAll('.product-card__title a').forEach((link) => {
        const text = link.textContent;
        link.innerHTML = text.replace(regex, '<mark>$1</mark>');
      });
    }

      function renderSearchSummary(query) {
        if (!searchSummary) return;
        const brand = normalizeText(getInputValue(filterEls.brand, 'all'));
        const category = normalizeText(getInputValue(filterEls.category, 'all'));
        const hasQuery = !!query;
        const isFunatVitamins = brand === 'funat' && category === 'vitaminas';
        const shouldShow = hasQuery || isFunatVitamins;

        if (!shouldShow) {
          searchSummary.innerHTML = '';
          return;
        }

        const label = hasQuery
          ? `Resultados para: <strong>${escapeHtml(query)}</strong>`
          : 'Colección: <strong>Funat · Vitaminas</strong>';

        searchSummary.innerHTML = `
          <span>${label}</span>
          <button type="button" class="btn-ghost" id="clearSearch">Limpiar busqueda</button>
        `;
        const clearBtn = document.getElementById('clearSearch');
        if (clearBtn) {
          clearBtn.addEventListener('click', () => {
            if (filterEls.search) filterEls.search.value = '';
            if (filterEls.brand) filterEls.brand.value = 'all';
            if (filterEls.category) filterEls.category.value = 'all';
            const params = new URLSearchParams(window.location.search);
            params.delete('q');
            params.delete('brand');
            params.delete('marca');
            params.delete('category');
            params.delete('categoria');
            const nextUrl = params.toString()
              ? `${window.location.pathname}?${params.toString()}`
              : window.location.pathname;
            history.replaceState({}, '', nextUrl);
            syncQuickBrandChip();
            renderCategoryProducts(window.applyFilters(window.ALL_PRODUCTS || []));
          });
        }
      }

      function populateBrandFilter(list) {
        if (!filterEls.brand) return;
        const current = normalizeText(filterEls.brand.value || 'all');
        const brandMap = new Map();
        list.forEach((product) => {
          const raw = String(product.marca || '').trim();
          const key = normalizeText(raw);
          if (key && !brandMap.has(key)) brandMap.set(key, raw);
        });
        const sortedBrands = Array.from(brandMap.entries()).sort((a, b) => a[1].localeCompare(b[1]));
        const options = ['<option value="all">Todas</option>'];
        sortedBrands.forEach(([key, label]) => {
          options.push(`<option value="${key}">${label}</option>`);
        });
        filterEls.brand.innerHTML = options.join('');
        if (current && (current === 'all' || brandMap.has(current))) {
          filterEls.brand.value = current;
        }
        syncQuickBrandChip();
      }

      function syncQuickBrandChip() {
        if (quickBrandFunat && filterEls.brand) {
          const active = normalizeText(filterEls.brand.value) === 'funat';
          quickBrandFunat.classList.toggle('active', active);
        }
        if (quickBrandFunatVitamins && filterEls.brand && filterEls.category) {
          const brandActive = normalizeText(filterEls.brand.value) === 'funat';
          const categoryActive = normalizeText(filterEls.category.value) === 'vitaminas';
          quickBrandFunatVitamins.classList.toggle('active', brandActive && categoryActive);
        }
        if (quickBrandNutramerican && filterEls.brand) {
          const active = normalizeText(filterEls.brand.value) === 'nutramerican';
          quickBrandNutramerican.classList.toggle('active', active);
        }
      }
  
      function renderCatalogStatus(onRetry) {
      if (!catalogStatus) return;
      if (!window.NB_CATALOG_ERROR) {
        catalogStatus.innerHTML = '';
        return;
      }
      catalogStatus.innerHTML = `
        <div class="catalog-alert">
          <span>No pudimos cargar el catalogo.</span>
          <button class="btn-ghost" type="button" id="retryCatalog">Reintentar</button>
        </div>
      `;
      const retryBtn = document.getElementById('retryCatalog');
      if (retryBtn && typeof onRetry === 'function') {
        retryBtn.addEventListener('click', onRetry);
      }
    }

    function renderCatalogNotice() {
      const params = new URLSearchParams(window.location.search);
      const error = params.get('error');
      const notice = params.get('notice');
      if ((!error && !notice) || !catalogStatus) return;
      const messages = {
        'producto-no-encontrado': 'Producto no encontrado. Te mostramos el catálogo completo.'
      };
      const message = messages[error] || messages[notice];
      if (!message) return;
      catalogStatus.innerHTML = `
        <div class="catalog-alert">
          <span>${message}</span>
        </div>
      `;
      params.delete('error');
      params.delete('notice');
      const nextUrl = params.toString()
        ? `${window.location.pathname}?${params.toString()}`
        : window.location.pathname;
      history.replaceState({}, '', nextUrl);
      setTimeout(() => {
        if (catalogStatus && catalogStatus.innerHTML) {
          catalogStatus.innerHTML = '';
        }
      }, 5000);
    }

    function renderCategoryProducts(list) {
      if (resultCount) resultCount.textContent = '';
      if (resultsTotal) resultsTotal.textContent = list.length ? `(${list.length})` : '';
      updateCategorySeo(list);
      
      // Inyectar schemas para SEO
      if (typeof window.injectProductListSchema === 'function') {
        const params = new URLSearchParams(window.location.search);
        const category = params.get('category') || '';
        const query = params.get('q') || '';

        let title = 'Catálogo - Natural Be';
        let description = 'Explora nuestro catálogo de suplementos naturales.';

        if (query) {
          title = `Resultados para "${query}" - Natural Be`;
          description = `Resultados de búsqueda: ${query}. Encuentra suplementos naturales en Colombia.`;
        } else if (category) {
          const categoryNames = {
            'vitaminas': 'Vitaminas',
            'minerales': 'Minerales',
            'omega': 'Omega y Aceites',
            'colageno': 'Colágeno',
            'energia': 'Suplementos de Energía',
            'inmunidad': 'Suplementos para la Inmunidad',
            'antioxidantes': 'Antioxidantes'
          };
          const displayName = categoryNames[category] || category;
          title = `${displayName} - Natural Be`;
          description = `Compra ${displayName.toLowerCase()} naturales en Colombia. Envío 24-48h, pagos seguros.`;
        }

        window.injectProductListSchema(list.slice(0, 50), { title, description });

        const breadcrumbs = [
          { name: 'Inicio', url: 'https://naturalbe.com.co/' },
          { name: 'Catálogo', url: 'https://naturalbe.com.co/category.html' }
        ];

        if (category || query) {
          breadcrumbs.push({
            name: query ? `Búsqueda: ${query}` : (category || 'Productos'),
            url: window.location.href
          });
        }

        if (typeof window.injectBreadcrumbSchema === 'function') {
          window.injectBreadcrumbSchema(breadcrumbs);
        }
      }
      
      const totalItems = Array.isArray(list) ? list.length : 0;
      const limit = getLimitFromUrl();
      const totalPages = totalItems ? Math.ceil(totalItems / limit) : 1;
      const page = getPageFromUrl(totalPages);
      ensurePaginationParams(page, limit);
      updatePaginationLinks(page, totalPages, limit);

      const start = (page - 1) * limit;
      const pageItems = list.slice(start, start + limit);
      renderPaginationControls(page, totalPages, limit, totalItems, pageItems.length);

      if (!totalItems) {
        renderEmptyState(getSearchTerm());
        return;
      }

      if (grid) {
        grid.innerHTML = '<div class="catalog-loading" role="status" aria-live="polite">Cargando...</div>';
      }

      requestAnimationFrame(() => {
        if (!window.nbMarketplace || typeof window.nbMarketplace.renderProductGrid !== 'function') {
          renderBasicGrid(pageItems);
          return;
        }
        window.nbMarketplace.renderProductGrid(pageItems, grid);
        if (!pageItems.length) {
          renderEmptyState(getSearchTerm());
        } else {
          highlightMatches(getSearchTerm());
        }
      });
    }

    function renderBasicGrid(list) {
      if (!grid) return;
      if (!list.length) {
        renderEmptyState(getSearchTerm());
        return;
      }
      const html = list.map((product) => {
        const name = product.nombre || product.name || '';
        const price = Number(product.precio_oferta || product.precio || product.price || 0);
        const img = product.imagen_principal || product.image || './static/img/placeholder.webp';
        const url = (window.NaturalBe && typeof window.NaturalBe.buildProductURL === 'function')
          ? window.NaturalBe.buildProductURL(product)
          : (product.slug ? `./product.html?slug=${encodeURIComponent(product.slug)}` : './product.html');
        const safeName = escapeHtml(name);
        const safeDesc = escapeHtml(product.descripcion_corta || product.description || '');
        const safeImg = escapeHtml(sanitizeUrl(img));
        const safeUrl = escapeHtml(sanitizeUrl(url));
        return `
          <article class="product-card">
            <a class="product-card__media" href="/${safeUrl}">
              <img src="/${safeImg}" alt="${safeName}" loading="lazy" width="320" height="220" onerror="this.onerror=null;this.src='./static/img/placeholder.webp';">
            </a>
            <div class="product-card__body">
              <h3 class="product-card__title">
                <a href="/${safeUrl}">${safeName}</a>
              </h3>
              <p class="product-card__desc">${safeDesc}</p>
              <div class="product-card__price">
                <span>$${price.toLocaleString('es-CO')}</span>
              </div>
            </div>
          </article>
        `;
      }).join('');
      grid.innerHTML = html;
    }

    function normalizeBasicProduct(p) {
      const slug = p.slug || '';
      return {
        nombre: p.nombre || p.name || '',
        descripcion_corta: p.descripcion_corta || p.description || '',
        precio: Number(p.precio || p.price || 0),
        precio_oferta: p.precio_oferta != null ? Number(p.precio_oferta) : null,
        imagen_principal: p.imagen_principal || p.image || '',
        categoria: p.categoria || p.category || '',
        subcategoria: p.subcategoria || null,
        tags: p.tags || [],
        url: (window.NaturalBe && typeof window.NaturalBe.buildProductURL === 'function')
          ? window.NaturalBe.buildProductURL(p)
          : (slug ? `./product.html?slug=${encodeURIComponent(slug)}` : './product.html')
      };
    }

    async function fetchCatalogDirect() {
      const version = window.NB_DATA_VERSION || '1';
      const urls = [
        `./static/data/productos.json?v=${encodeURIComponent(version)}`,
        `/static/data/productos.json?v=${encodeURIComponent(version)}`
      ];
      let lastError = null;
      for (const url of urls) {
        try {
          const res = await fetch(url, { cache: 'no-store' });
          if (!res.ok) throw new Error(`Catalog fetch failed: ${res.status}`);
          const list = await res.json();
          window.NB_CATALOG_ERROR = false;
          window.NB_CATALOG_ERROR_MESSAGE = '';
          return Array.isArray(list) ? list.map(normalizeBasicProduct) : [];
        } catch (err) {
          lastError = err;
        }
      }
      window.NB_CATALOG_ERROR = true;
      window.NB_CATALOG_ERROR_MESSAGE = (lastError && lastError.message) || 'No pudimos cargar el catalogo.';
      return [];
    }

    function syncFromUrl() {
      const params = new URLSearchParams(window.location.search);
      const query = params.get('q') || '';
        const category = params.get('categoria') || params.get('category') || params.get('cat') || defaultCategory || 'all';
        const brand = params.get('brand') || params.get('marca') || 'all';
        const objective = params.get('objetivo') || defaultObjective || 'all';
        if (query && filterEls.search) filterEls.search.value = query;
        if (category && filterEls.category) filterEls.category.value = category;
        if (brand && filterEls.brand) filterEls.brand.value = brand;
        if (objective && filterEls.objective) filterEls.objective.value = objective;
        syncQuickBrandChip();
        const limit = getLimitFromUrl();
        if (limitSelect) limitSelect.value = String(limit);
      }

    window.bindFilters = function bindFilters(list) {
      // Prevenir listeners duplicados
      if (window.__bindFiltersDone) return;
      window.__bindFiltersDone = true;
      
      const debouncedRender = debounce(() => renderCategoryProducts(window.applyFilters(list)), 200);
      const debouncedSummary = debounce(() => {
        renderSearchSummary(getSearchTerm());
      }, 100);
      
      // Search input (con debounce)
      if (filterEls.search) {
        filterEls.search.addEventListener('input', () => {
          updateFilterParamsInUrl({ replace: true });
          updateUrlParams({ page: 1 }, { replace: true });
          debouncedRender();
        });
        filterEls.search.addEventListener('input', debouncedSummary);
      }
      
      // Cambios en filtros (sin debounce)
        if (filterEls.category) {
          filterEls.category.addEventListener('change', () => {
            updateFilterParamsInUrl({ replace: true });
            updateUrlParams({ page: 1 }, { replace: true });
            renderCategoryProducts(window.applyFilters(list));
          });
        }
        
        if (filterEls.brand) {
          filterEls.brand.addEventListener('change', () => {
            updateFilterParamsInUrl({ replace: true });
            updateUrlParams({ page: 1 }, { replace: true });
            syncQuickBrandChip();
            renderCategoryProducts(window.applyFilters(list));
          });
        }
        
        if (quickBrandFunat && filterEls.brand) {
          quickBrandFunat.addEventListener('click', () => {
            filterEls.brand.value = 'funat';
            updateFilterParamsInUrl({ replace: true });
            updateUrlParams({ page: 1 }, { replace: true });
            syncQuickBrandChip();
            renderCategoryProducts(window.applyFilters(list));
          });
        }
        
        if (quickBrandFunatVitamins && filterEls.brand && filterEls.category) {
          quickBrandFunatVitamins.addEventListener('click', () => {
            filterEls.brand.value = 'funat';
            filterEls.category.value = 'vitaminas';
            updateFilterParamsInUrl({ replace: true });
            updateUrlParams({ page: 1 }, { replace: true });
            syncQuickBrandChip();
            renderCategoryProducts(window.applyFilters(list));
          });
        }
        
        if (quickBrandNutramerican && filterEls.brand) {
          quickBrandNutramerican.addEventListener('click', () => {
            filterEls.brand.value = 'nutramerican';
            updateFilterParamsInUrl({ replace: true });
            updateUrlParams({ page: 1 }, { replace: true });
            syncQuickBrandChip();
            renderCategoryProducts(window.applyFilters(list));
          });
        }
        
        if (filterEls.objective) {
          filterEls.objective.addEventListener('change', () => {
            updateFilterParamsInUrl({ replace: true });
          updateUrlParams({ page: 1 }, { replace: true });
          renderCategoryProducts(window.applyFilters(list));
        });
      }
      
      if (filterEls.price) {
        filterEls.price.addEventListener('change', () => {
          updateUrlParams({ page: 1 }, { replace: true });
          renderCategoryProducts(window.applyFilters(list));
        });
      }
      
      if (filterEls.sale) {
        filterEls.sale.addEventListener('change', () => {
          updateUrlParams({ page: 1 }, { replace: true });
          renderCategoryProducts(window.applyFilters(list));
        });
      }
      
      if (filterEls.popular) {
        filterEls.popular.addEventListener('change', () => {
          updateUrlParams({ page: 1 }, { replace: true });
          renderCategoryProducts(window.applyFilters(list));
        });
      }
      
      if (filterEls.isNew) {
        filterEls.isNew.addEventListener('change', () => {
          updateUrlParams({ page: 1 }, { replace: true });
          renderCategoryProducts(window.applyFilters(list));
        });
      }
      
      if (filterEls.sort) {
        filterEls.sort.addEventListener('change', () => {
          updateUrlParams({ page: 1 }, { replace: true });
          renderCategoryProducts(window.applyFilters(list));
        });
      }
      if (limitSelect) {
        limitSelect.addEventListener('change', () => {
          const nextLimit = Number(limitSelect.value) || getLimitByViewport();
          localStorage.setItem('nb_catalog_limit', String(nextLimit));
          updateUrlParams({ limit: nextLimit, page: 1 }, { replace: true });
          renderCategoryProducts(window.applyFilters(list));
        });
      }
      
      // Reset button
        if (filterEls.reset) {
          filterEls.reset.addEventListener('click', () => {
            if (filterEls.search) filterEls.search.value = '';
            if (filterEls.category) filterEls.category.value = 'all';
            if (filterEls.brand) filterEls.brand.value = 'all';
            if (filterEls.objective) filterEls.objective.value = 'all';
          if (filterEls.price) filterEls.price.value = 'all';
          if (filterEls.sale) filterEls.sale.checked = false;
            if (filterEls.popular) filterEls.popular.checked = false;
            if (filterEls.isNew) filterEls.isNew.checked = false;
            if (filterEls.sort) filterEls.sort.value = 'featured';
            syncQuickBrandChip();
            updateFilterParamsInUrl({ replace: true });
            updateUrlParams({ page: 1 }, { replace: true });
          renderCategoryProducts(window.applyFilters(list));
        });
      }
    }

    function initCatalog() {
      // Asegurar que el renderer del catálogo no sea sobrescrito por cart.js
      window.renderProducts = renderCategoryProducts;
      applyResponsiveLimitOverride();
      if (paginationNav && !paginationNav.dataset.bound) {
        paginationNav.addEventListener('click', (event) => {
          const btn = event.target.closest('[data-page]');
          if (!btn || btn.disabled) return;
          const targetPage = Number(btn.getAttribute('data-page'));
          if (!Number.isFinite(targetPage)) return;
          updateUrlParams({ page: targetPage }, { replace: false });
          renderCategoryProducts(window.applyFilters(window.ALL_PRODUCTS || []));
          scrollToGrid();
        });
        paginationNav.dataset.bound = '1';
      }
      if (window.location && window.location.protocol === 'file:' && catalogStatus) {
        catalogStatus.innerHTML = `
          <div class="catalog-alert">
            <span>Estas viendo el sitio en modo local (file://). Para cargar el catalogo completo usa un servidor local.</span>
          </div>
        `;
      }
        if (typeof window.loadProductsData !== 'function') {
          const products = window.ALL_PRODUCTS || window.PRODUCTS || [];
          if (products.length) {
            populateBrandFilter(products);
            syncFromUrl();
            window.bindFilters(products);
            renderCatalogNotice();
            renderCategoryProducts(window.applyFilters(products));
            renderCatalogStatus();
          } else {
            syncFromUrl();
            fetchCatalogDirect().then((list) => {
              window.ALL_PRODUCTS = list;
              populateBrandFilter(list);
              syncFromUrl();
              window.bindFilters(list);
              renderCatalogNotice();
              renderCategoryProducts(window.applyFilters(list));
              renderCatalogStatus();
            });
          }
          return;
        }
        syncFromUrl();
        window.loadProductsData()
          .then(() => {
            let products = window.ALL_PRODUCTS || [];
            if (!products.length) {
              return fetchCatalogDirect().then((list) => {
                window.ALL_PRODUCTS = list;
                products = list;
                populateBrandFilter(products);
                syncFromUrl();
                window.bindFilters(products);
                renderCategoryProducts(window.applyFilters(products));
                renderSearchSummary(getSearchTerm());
                renderCatalogStatus();
              });
            }
            populateBrandFilter(products);
            syncFromUrl();
            window.bindFilters(products);
            renderCatalogNotice();
            renderCategoryProducts(window.applyFilters(products));
            renderSearchSummary(getSearchTerm());
            renderCatalogStatus(() => {
            window.loadProductsData({ force: true }).then(() => {
              const refreshed = window.ALL_PRODUCTS || [];
              renderCategoryProducts(window.applyFilters(refreshed));
              renderCatalogStatus();
            });
          });
        })
          .catch((err) => {
            console.error('Error en loadProductsData:', err);
            syncFromUrl();
            fetchCatalogDirect().then((list) => {
              window.ALL_PRODUCTS = list;
              populateBrandFilter(list);
              syncFromUrl();
              window.bindFilters(list);
              renderCatalogNotice();
              renderCategoryProducts(window.applyFilters(list));
              renderSearchSummary(getSearchTerm());
            renderCatalogStatus();
          });
        });
    }

    window.addEventListener('popstate', () => {
      const products = window.ALL_PRODUCTS || [];
      if (products.length) {
        renderCategoryProducts(window.applyFilters(products));
      }
    });

    // Esperar a que DOM esté listo Y a que los scripts hayan cargado
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        // Esperar a que products-data.js esté listo
        if (typeof window.loadProductsData === 'function') {
          initCatalog();
        } else {
          window.addEventListener('ProductsDataReady', initCatalog, { once: true });
        }
      });
    } else {
      // Si el DOM ya está listo
      if (typeof window.loadProductsData === 'function') {
        initCatalog();
      } else {
        window.addEventListener('ProductsDataReady', initCatalog, { once: true });
      }
    }
  })();
  </script>

    <!-- FIX DE BÚSQUEDA OPTIMIZADA -->
    <script src="/static/js/category-search-fix.js?v=2026-02-01" defer></script>
    
</body>
</html>







