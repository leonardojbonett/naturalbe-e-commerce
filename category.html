<!DOCTYPE html>
<html lang="es-CO">
<head>
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' 'unsafe-inline' 'unsafe-eval'
      https://www.googletagmanager.com
      https://www.google-analytics.com
      https://www.clarity.ms
      https://scripts.clarity.ms
      https://unpkg.com
      https://checkout.wompi.co
      https://production.wompi.co
      https://connect.facebook.net
      https://cdn.jsdelivr.net
      https://cdn.userway.org
      https://wa.me;
    style-src 'self' 'unsafe-inline'
      https://fonts.googleapis.com
      https://cdn.jsdelivr.net
      https://unpkg.com
      https://cdn.userway.org;
    img-src 'self' data: blob:
      https://www.google-analytics.com
      https://www.googletagmanager.com
      https://www.google.com
      https://www.google.com.co
      https://*.clarity.ms
      https://c.bing.com
      https://connect.facebook.net
      https://www.facebook.com
      https://cdn.userway.org
      https://funat.co
      https://www.funat.co
      https://nutramerican.com
      https://www.nutramerican.com
      https://product-images.farmatodo.com
      https://www.farmatodo.com.co
      https://optimumnutrition.com.co
      https://www.optimumnutrition.com.co
      https://ogmantra.co
      https://www.ogmantra.co
      https://productosprosacolombia.com
      https://www.productosprosacolombia.com;
    font-src 'self' data:
      https://fonts.gstatic.com
      https://cdn.userway.org;
    connect-src 'self'
      https://www.google-analytics.com
      https://analytics.google.com
      https://www.googletagmanager.com
      https://stats.g.doubleclick.net
      https://cdn.jsdelivr.net
      https://*.clarity.ms
      https://*.algolia.net
      https://*.algolianet.com
      https://insights.algolia.io
      https://fonts.googleapis.com
      https://fonts.gstatic.com
      https://checkout.wompi.co
      https://production.wompi.co
      https://connect.facebook.net
      https://www.facebook.com
      https://graph.facebook.com
      https://cdn.userway.org
      https://api.userway.org;
    frame-src 'self'
      https://checkout.wompi.co
      https://www.facebook.com
      https://www.youtube.com
      https://cdn.userway.org;
    object-src 'none';
    base-uri 'self';
    form-action 'self' https://checkout.wompi.co https://wa.me;
    upgrade-insecure-requests;
  ">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <!-- Google Tag Manager -->
  <script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-M7MF395K');
  </script>
  <!-- End Google Tag Manager -->
  <meta charset="UTF-8">
  <meta name="ga4-id" content="G-DM18HLQ3R8">
  <meta name="meta-pixel-id" content="869358656017955">
  <meta name="p:domain_verify" content="1a26b1491f6ba22b614db7e51c555064">
  <link rel="icon" href="https://naturalbe.com.co/static/img/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" sizes="32x32" href="https://naturalbe.com.co/static/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://naturalbe.com.co/static/img/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="192x192" href="https://naturalbe.com.co/static/img/android-chrome-192x192.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://naturalbe.com.co/static/img/apple-touch-icon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  
  <!-- Meta tags adicionales para SEO -->
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="author" content="Natural Be">
  <meta name="keywords" content="suplementos, vitaminas, colageno, omega, magnesio, salud, bienestar, Colombia, natural">
  
  <!-- Open Graph mejorado -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Natural Be | Catálogo de suplementos">
  <meta property="og:description" content="Explora el catálogo de suplementos Natural Be por objetivo, categoría o beneficio.">
  <meta property="og:url" content="https://naturalbe.com.co/categoria/suplementos">
  <meta property="og:image" content="https://naturalbe.com.co/static/img/og-naturalbe.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="Natural Be">
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Natural Be | Catálogo de suplementos">
  <meta name="twitter:description" content="Explora el catálogo de suplementos Natural Be por objetivo, categoría o beneficio.">
  <meta name="twitter:image" content="https://naturalbe.com.co/static/img/og-naturalbe.jpg">
  <script type="text/javascript">
    (function (c, l, a, r, i) {
      c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments); };
      var loaded = false;
      function loadClarity() {
        if (loaded) return;
        loaded = true;
        var t = l.createElement(r);
        t.async = 1;
        t.src = 'https://www.clarity.ms/tag/' + i + '?ref=bwt';
        var y = l.getElementsByTagName(r)[0];
        y.parentNode.insertBefore(t, y);
      }
      ['scroll', 'pointerdown', 'keydown', 'touchstart'].forEach(function (evt) {
        c.addEventListener(evt, loadClarity, { once: true, passive: true });
      });
    })(window, document, 'clarity', 'script', 'vl54hiwglb');
  </script>

  <title>Catálogo de Suplementos Naturales en Colombia | Natural Be</title>
  <meta name="description" content="Compra suplementos naturales en Colombia: colágeno, omega 3, vitaminas y minerales. Filtra por objetivo y marca. Envío 24-48h, pago seguro con Wompi.">
  <link rel="canonical" href="https://naturalbe.com.co/categoria/suplementos">
  <link rel="alternate" hreflang="es-CO" href="https://naturalbe.com.co/categoria/suplementos">
  <link rel="alternate" hreflang="x-default" href="https://naturalbe.com.co/categoria/suplementos">
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Inicio",
        "item": "https://naturalbe.com.co/"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Catálogo",
        "item": "https://naturalbe.com.co/categoria/suplementos"
      }
    ]
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Natural Be | Catálogo de suplementos",
    "url": "https://naturalbe.com.co/categoria/suplementos",
    "inLanguage": "es-CO",
    "datePublished": "2026-02-18T08:00:00-05:00",
    "dateModified": "2026-02-18T08:00:00-05:00"
  }
  </script>
  <script type="application/ld+json" id="category-itemlist-static">
  {
    "@context": "https://schema.org",
    "@type": "ItemList",
    "name": "Productos destacados Natural Be",
    "itemListElement": [
      {"@type":"ListItem","position":1,"url":"https://naturalbe.com.co/producto/omega-3-6-9","name":"Omega 3, 6, 9"},
      {"@type":"ListItem","position":2,"url":"https://naturalbe.com.co/producto/xero-ft","name":"Xero FT"},
      {"@type":"ListItem","position":3,"url":"https://naturalbe.com.co/producto/cloruro-de-magnesio","name":"Cloruro de Magnesio"},
      {"@type":"ListItem","position":4,"url":"https://naturalbe.com.co/producto/citrato-de-magnesio","name":"Citrato de Magnesio"},
      {"@type":"ListItem","position":5,"url":"https://naturalbe.com.co/producto/omega-3-1000mg","name":"Omega-3 1000 mg"},
      {"@type":"ListItem","position":6,"url":"https://naturalbe.com.co/producto/colageno-biotina-gomas","name":"Colágeno y Biotina Gomas"},
      {"@type":"ListItem","position":7,"url":"https://naturalbe.com.co/producto/colageno-hidrolizado-liquido","name":"Colágeno Hidrolizado Líquido"},
      {"@type":"ListItem","position":8,"url":"https://naturalbe.com.co/producto/vitamina-e-procaps","name":"Vitamina E Procaps"},
      {"@type":"ListItem","position":9,"url":"https://naturalbe.com.co/producto/dolcal-magnesio","name":"Dolcal con Magnesio"},
      {"@type":"ListItem","position":10,"url":"https://naturalbe.com.co/producto/aceite-higado-bacalao","name":"Aceite de Hígado de Bacalao"}
    ]
  }
  </script>

  <link rel="preconnect" href="https://wa.me">
  <link rel="preload" href="/static/img/logo.webp" as="image">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=optional" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=optional" rel="stylesheet"></noscript>
  <style>
    /* Critical CSS para evitar FOUC */
    body{font-family:'Plus Jakarta Sans',sans-serif;line-height:1.5;margin:0}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    .skip-link{position:absolute;top:-100%;left:0;padding:0.5rem 1rem;background:#14532d;color:#fff;font-weight:700;z-index:9999}
    .skip-link:focus{top:0}
  </style>
  <script>
    window.NB_VERSION = "2026-02-25-prosa-makeup";
    window.NB_DATA_VERSION = window.NB_VERSION;
  </script>
  <link rel="preload" href="/static/css/main.min.css?v=2026-02-23-4" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="/static/css/main.min.css?v=2026-02-23-4"></noscript>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "@id": "https://naturalbe.com.co/categoria/suplementos#faq",
    "url": "https://naturalbe.com.co/categoria/suplementos",
    "inLanguage": "es-CO",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "¿Cuánto tarda el envío?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Los envíos en Colombia tardan 24 a 48 horas hábiles después de confirmar el pago."
        }
      },
      {
        "@type": "Question",
        "name": "¿Cuánto cuesta el envío?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "El envío cuesta $15.000 COP según destino y transportadora. Envío gratis desde $100.000 COP."
        }
      },
      {
        "@type": "Question",
        "name": "¿Cómo funcionan las devoluciones?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Puedes solicitar devolución o cambio hasta 5 días calendario después de la entrega, siempre que el producto esté sellado y sin uso."
        }
      }
    ]
  }
  </script>
</head>
<body class="marketplace">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M7MF395K"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <a href="#mainContent" class="skip-link">Saltar al contenido principal</a>

  <div class="promo-bar" id="promoBar" aria-live="polite">
    <span class="promo-icon">●</span>
    <span class="promo-message" id="promoMessage">Envíos 24-48h en Colombia · Envío gratis desde $100.000 · Pagos seguros con Wompi · Asesoría por WhatsApp</span>
    <button class="promo-close" type="button" onclick="if(window.closePromoBar){closePromoBar()}else{var bar=this.closest('.promo-bar');if(bar){bar.style.display='none';}}" aria-label="Cerrar promoción">×</button>
  </div>

  <header class="market-header" role="banner">
    <div class="market-header__top">
      <div class="market-brand">
        <a class="brand-logo" href="/" aria-label="Natural Be - Inicio">
          <img src="/static/img/logo.webp" alt="Natural Be" width="48" height="48" loading="eager" decoding="async">
          <span>Natural Be</span>
        </a>
        <button id="menuToggle" class="hamburger-btn" type="button" aria-label="Abrir menú" aria-haspopup="dialog" aria-expanded="false" aria-controls="mobileMenu">Menú</button>
      </div>

      <form class="market-search" data-search-form>
        <label class="sr-only" for="siteSearch">Buscar</label>
        <input id="siteSearch" type="search" placeholder="Buscar suplementos, marcas o objetivos">
        <button type="submit" class="search-btn" aria-label="Buscar">
          <span class="sr-only">Buscar</span>
          <svg class="search-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M11 4a7 7 0 1 1 0 14 7 7 0 0 1 0-14Zm0-2a9 9 0 1 0 5.6 16.1l4.6 4.6a1 1 0 0 0 1.4-1.4l-4.6-4.6A9 9 0 0 0 11 2Z"></path>
          </svg>
        </button>
      </form>

      <div class="market-actions">
        <a class="market-action-link" href="/">Inicio</a>
        <a class="market-action-link" href="/">Confianza</a>
        <a class="market-action-pill" href="https://wa.me/573137212923?utm_source=naturalbe&utm_medium=website&utm_campaign=retail&utm_content=nav_whatsapp" id="navWhatsappLink" data-wa-content="nav_whatsapp" target="_blank" rel="noopener">WhatsApp</a>
        <button class="market-action-pill" type="button" data-cart-trigger>
          Carrito
          <span class="cart-badge">0</span>
        </button>
      </div>
    </div>

    <div class="market-header__nav">
      <div class="mega-wrapper">
        <button class="mega-toggle" type="button" data-mega-toggle aria-expanded="false" aria-controls="megaMenu">Categorías</button>
        <div class="mega-menu" id="megaMenu" data-mega-menu aria-hidden="true" hidden>
          <div class="mega-column">
            <h4>Comprar por objetivo</h4>
            <a href="/categoria/suplementos?objetivo=energia">Energía & rendimiento</a>
            <a href="/categoria/suplementos?objetivo=inmunidad">Inmunidad</a>
            <a href="/categoria/suplementos?objetivo=piel">Piel & colágeno</a>
            <a href="/categoria/suplementos?objetivo=estres">Estrés & sueño</a>
          </div>
          <div class="mega-column">
            <h4>Suplementos</h4>
            <a href="/catalogo-vitaminas.html">Vitaminas</a>
            <a href="/categoria/minerales">Minerales</a>
            <a href="/categoria/nutricion">Nutrición</a>
            <a href="/categoria/suplementos?q=suplementos%20dietarios">Suplementos dietarios</a>
            <a href="/categoria/omega">Omega & aceites</a>
            <a href="/categoria/colageno">Colágeno</a>
          </div>
<div class="mega-column">
  <h4>Explorar</h4>
  <a href="/categoria/suplementos?q=energia">Energía diaria</a>
  <a href="/categoria/suplementos?q=inmunidad">Defensas</a>
  <a href="/categoria/suplementos">Todos los suplementos</a>
  <a href="/categoria/suplementos?q=botanitas">Marca Botanitas</a>
<a href="/categoria/suplementos?q=satibo">Marca Satibo</a>
  <a href="/categoria/suplementos?brand=nutramerican">Marca Nutramerican</a>
  <a href="/blog">Blog</a>
</div>
<div class="mega-column">
  <h4>Más categorías</h4>
  <a href="/categoria/suplementos?q=antioxidantes">Antioxidantes</a>
  <a href="/categoria/suplementos?q=huesos">Huesos y articulaciones</a>
  <a href="/catalogo-cabello.html">Cabello</a>
  <a href="/catalogo-digestivos.html">Digestivos</a>
  <a href="/categoria/suplementos?q=piel">Cuidado piel</a>
  <a href="/categoria/suplementos?q=intimo">Cuidado íntimo</a>
</div>
        </div>
      </div>
      <nav class="market-links" aria-label="Navegación rápida">
        <a href="/#destacados-marcas">Destacados</a>
        <a href="/#ofertas">Ofertas</a>
        <a href="/#nuevos">Nuevos</a>
        <a href="/#categorias">Categorías</a>
        <a href="/#proceso">Cómo comprar</a>
      </nav>
      <div class="market-socials" aria-label="Redes sociales Natural Be">
        <a href="https://www.facebook.com/NaturalBeColombia" target="_blank" rel="noopener" aria-label="Facebook Natural Be">
          <svg class="social-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M13.5 9.5V8.1c0-.7.4-1.1 1.3-1.1h1.6V4.2h-2.2C11.7 4.2 10.5 5.6 10.5 8v1.5H8.8v2.7h1.7V20h3V12.2h2.1l.4-2.7h-2.5Z"></path>
          </svg>
        </a>
        <a href="https://www.instagram.com/naturalbe__/" target="_blank" rel="noopener" aria-label="Instagram Natural Be">
          <svg class="social-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M7.5 4.5h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-9a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3Zm9 1.8h-9A1.2 1.2 0 0 0 6.3 7.5v9c0 .7.5 1.2 1.2 1.2h9c.7 0 1.2-.5 1.2-1.2v-9c0-.7-.5-1.2-1.2-1.2ZM12 8.1a3.9 3.9 0 1 1 0 7.8 3.9 3.9 0 0 1 0-7.8Zm0 1.8a2.1 2.1 0 1 0 0 4.2 2.1 2.1 0 0 0 0-4.2Zm4.2-.9a.9.9 0 1 1 0 1.8.9.9 0 0 1 0-1.8Z"></path>
          </svg>
        </a>
        <a href="https://co.pinterest.com/naturalbetutiendasaludable" target="_blank" rel="noopener" aria-label="Pinterest Natural Be">
          <svg class="social-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M12.1 4.5c-3.8 0-6.6 2.7-6.6 6.1 0 2.5 1.5 4.6 3.6 5.4.3.1.5 0 .6-.3l.3-1.2c.1-.2 0-.3-.2-.5-.7-.7-1.1-1.6-1.1-2.8 0-2.3 1.7-4.4 4.5-4.4 2.4 0 3.8 1.6 3.8 3.6 0 2.7-1.3 4.6-3.1 4.6-1 0-1.8-.8-1.5-1.9l.5-2.1c.3-1-.2-1.8-1.1-1.8-.9 0-1.7 1-1.7 2.3 0 .8.3 1.4.3 1.4l-1.2 5a7.2 7.2 0 0 0 .1 2.1.3.3 0 0 0 .6 0c.1-.2.7-1.8.9-2.5l.5-2c.4.7 1.5 1.4 2.7 1.4 3.6 0 6-3.2 6-7.2 0-3.7-3.1-6.3-6.9-6.3Z"></path>
          </svg>
        </a>
      </div>
    </div>
  </header>

  <div id="menuOverlay" class="menu-overlay" tabindex="-1" aria-hidden="true"></div>
  <div id="mobileMenu" class="mobile-menu" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="mobileMenuTitle">
    <div class="mobile-menu-header">
      <h2 id="mobileMenuTitle" class="sr-only">Menú principal</h2>
      <button class="mobile-menu-close" type="button" onclick="toggleMobileMenu(true)" aria-label="Cerrar menú">×</button>
    </div>
    <nav class="nav-mobile" aria-label="Navegación principal">
      <a href="/#inicio">Inicio</a>
      <a href="/categoria/suplementos">Catálogo</a>
      <a href="/#destacados-marcas">Destacados</a>
      <a href="/#ofertas">Ofertas</a>
      <a href="/#nuevos">Nuevos</a>
      <a href="/#categorias">Categorías</a>
      <a href="/#proceso">Cómo comprar</a>
      <a href="/envios">Envíos</a>
      <a href="/devoluciones">Devoluciones</a>
      <a href="/categoria/suplementos?q=botanitas">Marca Botanitas</a>
  <a href="/blog">Blog</a>
      <a href="https://wa.me/573137212923?utm_source=naturalbe&utm_medium=website&utm_campaign=retail&utm_content=menu_whatsapp" id="menuWhatsappLink" data-wa-content="menu_whatsapp" target="_blank" rel="noopener">WhatsApp</a>
          <div class="market-socials market-socials--mobile" aria-label="Redes sociales Natural Be">
        <a href="https://www.facebook.com/NaturalBeColombia" target="_blank" rel="noopener" aria-label="Facebook Natural Be">
          <svg class="social-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M13.5 9.5V8.1c0-.7.4-1.1 1.3-1.1h1.6V4.2h-2.2C11.7 4.2 10.5 5.6 10.5 8v1.5H8.8v2.7h1.7V20h3V12.2h2.1l.4-2.7h-2.5Z"></path>
          </svg>
        </a>
        <a href="https://www.instagram.com/naturalbe__/" target="_blank" rel="noopener" aria-label="Instagram Natural Be">
          <svg class="social-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M7.5 4.5h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-9a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3Zm9 1.8h-9A1.2 1.2 0 0 0 6.3 7.5v9c0 .7.5 1.2 1.2 1.2h9c.7 0 1.2-.5 1.2-1.2v-9c0-.7-.5-1.2-1.2-1.2ZM12 8.1a3.9 3.9 0 1 1 0 7.8 3.9 3.9 0 0 1 0-7.8Zm0 1.8a2.1 2.1 0 1 0 0 4.2 2.1 2.1 0 0 0 0-4.2Zm4.2-.9a.9.9 0 1 1 0 1.8.9.9 0 0 1 0-1.8Z"></path>
          </svg>
        </a>
        <a href="https://co.pinterest.com/naturalbetutiendasaludable" target="_blank" rel="noopener" aria-label="Pinterest Natural Be">
          <svg class="social-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M12.1 4.5c-3.8 0-6.6 2.7-6.6 6.1 0 2.5 1.5 4.6 3.6 5.4.3.1.5 0 .6-.3l.3-1.2c.1-.2 0-.3-.2-.5-.7-.7-1.1-1.6-1.1-2.8 0-2.3 1.7-4.4 4.5-4.4 2.4 0 3.8 1.6 3.8 3.6 0 2.7-1.3 4.6-3.1 4.6-1 0-1.8-.8-1.5-1.9l.5-2.1c.3-1-.2-1.8-1.1-1.8-.9 0-1.7 1-1.7 2.3 0 .8.3 1.4.3 1.4l-1.2 5a7.2 7.2 0 0 0 .1 2.1.3.3 0 0 0 .6 0c.1-.2.7-1.8.9-2.5l.5-2c.4.7 1.5 1.4 2.7 1.4 3.6 0 6-3.2 6-7.2 0-3.7-3.1-6.3-6.9-6.3Z"></path>
          </svg>
        </a>
      </div>
</nav>
  </div>

  <main id="mainContent" class="page-shell" style="padding-top:0.75rem;">
    <noscript>
      <div class="catalog-alert">
        <span>Activa JavaScript para ver el catalogo completo.</span>
        <a class="btn-ghost" href="/">Volver al inicio</a>
      </div>
    </noscript>
    <nav class="breadcrumb" aria-label="Ruta de navegación">
      <a href="/">Inicio</a>
      <span aria-hidden="true">/</span>
      <span aria-current="page">Catálogo</span>
    </nav>
    <section class="page-shell" style="margin-top:0.75rem;">
      <p class="section-title" style="margin-bottom:0.35rem;">Productos destacados</p>
      <p class="section-subtitle">Rutas directas a productos populares del catálogo.</p>
      <ul class="footer-links">
        <li><a href="/producto/omega-3-6-9">Omega 3, 6, 9</a></li>
        <li><a href="/producto/xero-ft">Xero FT</a></li>
        <li><a href="/producto/cloruro-de-magnesio">Cloruro de Magnesio</a></li>
        <li><a href="/producto/citrato-de-magnesio">Citrato de Magnesio</a></li>
        <li><a href="/producto/omega-3-1000mg">Omega-3 1000 mg</a></li>
        <li><a href="/producto/colageno-biotina-gomas">Colágeno y Biotina Gomas</a></li>
        <li><a href="/producto/colageno-hidrolizado-liquido">Colágeno Hidrolizado Líquido</a></li>
        <li><a href="/producto/vitamina-e-procaps">Vitamina E Procaps</a></li>
        <li><a href="/producto/dolcal-magnesio">Dolcal con Magnesio</a></li>
        <li><a href="/producto/aceite-higado-bacalao">Aceite de Hígado de Bacalao</a></li>
      </ul>
    </section>
    <section class="page-shell" style="margin-top:0.75rem;">
      <p class="section-title" style="margin-bottom:0.35rem;">Busqueda inteligente</p>
      <p class="section-subtitle">Encuentra productos mas rapido por nombre, marca o necesidad.</p>
      <div id="search"></div>
      <small id="searchStatus" style="display:block;margin-top:0.35rem;color:#64748b;">La busqueda avanzada se activa al interactuar.</small>
    </section>

    <section class="page-shell" style="margin-top:0.75rem;">
      <p class="section-title" style="margin-bottom:0.35rem;">Explora por categorías populares</p>
      <p class="section-subtitle">Atajos rápidos a las líneas más buscadas en Colombia.</p>
      <div class="category-grid">
        <a class="category-tile" href="/catalogo-vitaminas.html">
          <strong>Vitaminas</strong>
          <span>Energía diaria y defensas.</span>
        </a>
        <a class="category-tile" href="/categoria/omega">
          <strong>Omega & aceites</strong>
          <span>Corazón, mente y articulaciones.</span>
        </a>
        <a class="category-tile" href="/categoria/colageno">
          <strong>Colágeno</strong>
          <span>Piel, cabello y elasticidad.</span>
        </a>
        <a class="category-tile" href="/categoria/minerales">
          <strong>Minerales</strong>
          <span>Magnesio, zinc y balances clave.</span>
        </a>
        <a class="category-tile" href="/categoria/nutricion">
          <strong>Nutrición</strong>
          <span>Soporte diario con fórmulas completas.</span>
        </a>
        <a class="category-tile" href="/categoria/suplementos?q=suplementos%20dietarios">
          <strong>Suplementos dietarios</strong>
          <span>Multivitamínicos para la rutina.</span>
        </a>
      </div>
      <div class="brand-feature">
        <div>
          <span class="eyebrow">Marca destacada</span>
          <h3>Funat en Natural Be</h3>
          <p>Explora los suplementos Funat con envío rápido en Colombia.</p>
        </div>
        <a class="btn-primary" href="/categoria/vitaminas?brand=funat">Ver Funat en Vitaminas</a>
      </div>
    </section>
    <section class="hero-market" style="margin-top:0.75rem;">
      <div>
        <p class="section-subtitle">Catálogo Natural Be</p>
        <h1>Encuentra el suplemento ideal para tu objetivo</h1>
        <p>Filtra por beneficio, categoría o promoción. Guarda tus favoritos y compra con pagos seguros.</p>
        <p class="section-subtitle">Última actualización del catálogo: <time datetime="2026-02-18T08:00:00-05:00">18 de febrero de 2026</time></p>
      </div>
      <div class="trust-card" data-shipping-widget="compact"></div>
    </section>

    <div class="catalog-status" id="catalogStatus" role="status"></div>
    <div class="search-summary" id="searchSummary"></div>
    <div class="plp-toolbar">
      <div>
        <h2 class="section-title">Resultados <span class="results-total" id="resultsTotal"></span></h2>
        <p class="section-subtitle" id="resultsCount"></p>
      </div>
    <div class="plp-toolbar-actions">
      <label for="sortSelect">Ordenar:</label>
      <select id="sortSelect">
        <option value="featured">Destacados</option>
        <option value="price-asc">Precio menor a mayor</option>
        <option value="price-desc">Precio mayor a menor</option>
        <option value="name">Nombre A-Z</option>
      </select>
      <label for="pageLimit" class="limit-label">Por página:</label>
      <select id="pageLimit">
        <option value="12">12</option>
        <option value="18">18</option>
        <option value="24" selected>24</option>
        <option value="48">48</option>
      </select>
    </div>
    </div>

    <div class="plp-layout">
        <aside class="filters-panel">
          <div class="filter-group">
            <h4>Buscar</h4>
            <input type="search" id="filterSearch" placeholder="Marca, producto, beneficio">
          </div>
          <div class="filter-group">
            <h4>Marca</h4>
            <select id="filterBrand">
              <option value="all">Todas</option>
            </select>
            <div class="filter-quick">
              <button type="button" class="chip" id="quickBrandFunat" aria-label="Filtrar por marca Funat">Funat</button>
              <button type="button" class="chip" id="quickBrandFunatVitamins" aria-label="Filtrar Funat en Vitaminas">Funat · Vitaminas</button>
              <button type="button" class="chip" id="quickBrandNutramerican" aria-label="Filtrar por marca Nutramerican">Nutramerican</button>
            </div>
          </div>
          <div class="filter-group">
            <h4>Categoría</h4>
            <select id="filterCategory">
              <option value="all">Todas</option>
            <option value="vitaminas">Vitaminas</option>
            <option value="minerales">Minerales</option>
            <option value="omega">Omega & aceites</option>
            <option value="colageno">Colágeno</option>
            <option value="energia">Energía</option>
            <option value="inmunidad">Inmunidad</option>
            <option value="nutricion">Nutrición</option>
            <option value="suplementos dietarios">Suplementos dietarios</option>
            <option value="maquillaje">Maquillaje</option>
          </select>
        </div>
        <div class="filter-group">
          <h4>Objetivo</h4>
          <select id="filterObjective">
            <option value="all">Todos</option>
            <option value="energia">Energía & rendimiento</option>
            <option value="inmunidad">Inmunidad</option>
            <option value="piel">Piel & colágeno</option>
            <option value="estres">Estrés & sueño</option>
          </select>
        </div>
        <div class="filter-group">
          <h4>Precio</h4>
          <select id="filterPrice">
            <option value="all">Todos</option>
            <option value="0-50000">Hasta $50.000</option>
            <option value="50000-100000">$50.000 - $100.000</option>
            <option value="100000-999999">Más de $100.000</option>
          </select>
        </div>
        <div class="filter-group">
          <h4>Destacados</h4>
          <label><input type="checkbox" id="filterSale"> En oferta</label>
          <label><input type="checkbox" id="filterPopular"> Más vendidos</label>
          <label><input type="checkbox" id="filterNew"> Nuevos</label>
        </div>
        <button class="btn-ghost" type="button" id="filterReset">Restablecer filtros</button>
      </aside>

      <section>
    <div class="product-grid" id="plpGrid" data-image-status="#catalogStatus"></div>
    <div class="pagination-wrap">
      <div class="pagination-status" id="paginationStatus" aria-live="polite"></div>
      <div class="pagination-range" id="paginationRange" aria-live="polite"></div>
      <div class="pagination-count" id="paginationCount" aria-live="polite"></div>
      <nav id="pagination" class="pagination" aria-label="Paginación del catálogo"></nav>
    </div>
      </section>
    </div>

    <section class="page-shell" style="margin-top:0.75rem;" aria-labelledby="rutas-categoria-title">
      <h2 class="section-title" id="rutas-categoria-title">Explora también</h2>
      <p class="section-subtitle">Enlaces estratégicos para acelerar tu búsqueda por necesidad.</p>
      <div class="category-grid">
        <a class="category-tile" href="/categoria/suplementos?q=suplementos%20dietarios"><strong>Suplementos dietarios</strong><span>Categoría completa para rutina diaria.</span></a>
        <a class="category-tile" href="/catalogo-vitaminas.html"><strong>Vitaminas</strong><span>Apoyo inmune, energía y bienestar.</span></a>
        <a class="category-tile" href="/categoria/minerales"><strong>Minerales</strong><span>Magnesio, zinc y más opciones.</span></a>
        <a class="category-tile" href="/categoria/colageno"><strong>Colágeno</strong><span>Piel, cabello y articulaciones.</span></a>
        <a class="category-tile" href="/como-tomar-probioticos-colombia.html"><strong>Cómo tomar probióticos</strong><span>Guía de uso y frecuencia recomendada.</span></a>
        <a class="category-tile" href="/que-es-un-suplemento-dietario-colombia.html"><strong>Qué es un suplemento dietario</strong><span>Conceptos clave antes de comprar.</span></a>
        <a class="category-tile" href="/categoria/suplementos?q=tienda%20naturista%20online%20colombia"><strong>Tienda naturista online</strong><span>Compra segura con envío nacional.</span></a>
        <a class="category-tile" href="/categoria/suplementos?q=comprar%20suplementos%20colombia"><strong>Comprar suplementos en Colombia</strong><span>Comparador rápido por objetivo.</span></a>
      </div>
    </section>
      <section class="page-shell" style="margin-top:0.75rem;">
      <h2 class="section-title">Preguntas frecuentes</h2>
      <div class="faq-grid">
        <div class="faq-card">
          <h3>¿Cuánto tarda el envío?</h3>
          <p>Los envíos en Colombia tardan 24 a 48 horas hábiles después de confirmar el pago.</p>
        </div>
        <div class="faq-card">
          <h3>¿Cuánto cuesta el envío?</h3>
          <p>El envío cuesta $15.000 COP según destino y transportadora. Envío gratis desde $100.000 COP.</p>
        </div>
        <div class="faq-card">
          <h3>¿Cómo funcionan las devoluciones?</h3>
          <p>Puedes solicitar devolución o cambio hasta 5 días calendario después de la entrega, siempre que el producto esté sellado y sin uso.</p>
        </div>
      </div>
    </section>
</main>

  <a href="https://wa.me/573137212923?text=Hola!%20Quiero%20información%20sobre%20los%20productos%20de%20Natural%20Be&utm_source=naturalbe&utm_medium=website&utm_campaign=retail&utm_content=float_whatsapp"
     class="whatsapp-float" id="floatWhatsappLink" data-wa-content="float_whatsapp" target="_blank" aria-label="Contactar por WhatsApp">WA</a>

  <button class="cart-float" type="button" aria-label="Ver carrito de compras" aria-controls="cartModal" aria-expanded="false" data-cart-trigger>
    Carrito
    <span class="cart-badge">0</span>
  </button>

  <div class="cart-modal" id="cartModal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="cartTitle" aria-describedby="cartDesc" onclick="closeCartOnOutsideClick(event)" data-nosnippet>
    <div class="cart-content" onclick="event.stopPropagation()" tabindex="-1">
      <div class="cart-header">
        <h2 class="cart-title" id="cartTitle">Mi carrito</h2>
        <p class="sr-only" id="cartDesc">Revisa productos, ajusta cantidades y finaliza compra por WhatsApp o Wompi.</p>
        <button class="cart-close" type="button" onclick="toggleCart()" aria-label="Cerrar carrito">×</button>
      </div>
      <div class="cart-body" id="cartBody"></div>
      <div class="recommended-block" id="recommendedContainer" aria-live="polite"></div>
      <div class="cart-footer" id="cartFooter">
        <div class="cart-total">
          <span class="cart-total-label">Total:</span>
          <span class="cart-total-amount" id="cartTotal">$0</span>
        </div>
        <button class="cart-checkout-btn" onclick="checkoutWhatsApp()">Finalizar compra por WhatsApp</button>
        <button class="cart-clear-btn" onclick="clearCart()">Vaciar carrito</button>
        <div class="alt-payment">
          <p class="alt-payment-text">También puedes pagar con Wompi desde aquí.</p>
          <button class="alt-payment-btn" type="button" onclick="checkoutWompi()">Pagar con Wompi</button>
        </div>
      </div>
    </div>
  </div>

  <footer class="footer-market">
    <div class="page-shell footer-grid">
      <div>
        <h3>Natural Be</h3>
        <p>Suplementos confiables para energía, inmunidad y bienestar integral.</p>
      </div>
      <div>
        <h4>Categorías</h4>
        <ul class="footer-links">
  <li><a href="/catalogo-vitaminas.html">Vitaminas</a></li>
  <li><a href="/categoria/minerales">Minerales</a></li>
  <li><a href="/categoria/omega">Omega & aceites</a></li>
  <li><a href="/categoria/colageno">Colageno</a></li>
          <li><a href="/categoria/suplementos?q=energia">Energía</a></li>
  <li><a href="/categoria/suplementos?q=inmunidad">Inmunidad</a></li>
  <li><a href="/categoria/suplementos?q=antioxidantes">Antioxidantes</a></li>
  <li><a href="/categoria/suplementos?q=huesos">Huesos</a></li>
  <li><a href="/catalogo-cabello.html">Cabello</a></li>
  <li><a href="/catalogo-digestivos.html">Digestivos</a></li>
  <li><a href="/categoria/suplementos?q=piel">Cuidado piel</a></li>
          <li><a href="/categoria/suplementos?q=intimo">Cuidado íntimo</a></li>
  <li><a href="/categoria/suplementos">Cuidado adulto</a></li>
  <li><a href="/categoria/suplementos">Antisepticos</a></li>
  <li><a href="/categoria/suplementos">Medicamentos</a></li>
  <li><a href="/categoria/suplementos?q=botanitas">Marca Botanitas</a></li>
  <li><a href="/categoria/suplementos?q=satibo">Marca Satibo</a></li>
  <li><a href="/categoria/suplementos">Todos los suplementos</a></li>
</ul>
      </div>
      <div>
        <h4>Soporte</h4>
        <ul class="footer-links">
          <li><a href="/envios">Envíos</a></li>
          <li><a href="/devoluciones">Devoluciones</a></li>
          <li><a href="/terminos">Términos y condiciones</a></li>
          <li><a href="/privacidad">Política de privacidad</a></li>
          <li><a href="/">Sobre Natural Be</a></li>
        </ul>
      </div>
      <div>
        <h4>Contacto</h4>
        <p>Barranquilla, Atlántico, Colombia</p>
        <p>WhatsApp: +57 313 721 2923</p>
        <a href="https://wa.me/573137212923?utm_source=naturalbe&utm_medium=website&utm_campaign=retail&utm_content=footer_whatsapp" id="footerWhatsappLink" data-wa-content="footer_whatsapp" target="_blank" rel="noopener">Escríbenos</a>
      </div>
    </div>
  </footer>

  <!-- Scripts Esenciales -->
  <script src="/static/js/nb-core.js?v=2026-02-14" defer></script>
  <script src="/static/js/promo.js" defer></script>
  <script src="/static/js/schema-builder.js?v=2026-02-20" defer></script>
  <script src="/static/js/marketplace.js?v=2026-02-14" defer></script>
  <script src="/static/js/products-data.min.js?v=2026-02-14" defer></script>
  <script src="/static/js/search-engine.js?v=2026-02-07" defer></script>
  <script src="/static/js/cart.js?v=2026-02-07" defer></script>
  <script src="/static/js/webp-support.js?v=2026-02-14" defer></script>
  <script>
    (function () {
      var loaded = false;
      function loadTracking() {
        if (loaded) return;
        loaded = true;
        var s = document.createElement('script');
        s.src = '/static/js/tracking.js?v=2026-02-16';
        s.defer = true;
        document.head.appendChild(s);
      }
      var idle = window.requestIdleCallback || function (fn) { setTimeout(fn, 2400); };
      idle(loadTracking);
      ['scroll', 'pointerdown', 'keydown', 'touchstart'].forEach(function (evt) {
        window.addEventListener(evt, loadTracking, { once: true, passive: true });
      });
      window.addEventListener('load', function () { setTimeout(loadTracking, 1200); }, { once: true });
    })();
  </script>
  
  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('./sw.js')
          .then(function(registration) {
            registration.update();
          })
          .catch(function(registrationError) {
            // Silent failure - SW not critical
          });
      });
    }
  </script>
  
  <!-- Scripts críticos cargados primero -->
  <script>
    // Funciones críticas inline para mejor rendimiento
    function escapeHtml(value) {
      return String(value || '').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#39;');
    }
    function sanitizeUrl(value) {
      const raw = String(value || '');
      return /^\s*javascript:/i.test(raw) ? '#' : raw;
    }
  </script>
  
  <!-- Carga diferida de scripts no críticos -->
  <script>
    window.addEventListener('load', function() {
      // Cargar scripts secundarios después del load principal
      const scripts = [
        '/static/js/wompi-config.js'
      ];
      scripts.forEach(src => {
        const script = document.createElement('script');
        script.src = src;
        script.defer = true;
        document.head.appendChild(script);
      });
    });
  </script>

  <script>
    (function () {
      const filterEls = {
        search: document.getElementById('filterSearch'),
        brand: document.getElementById('filterBrand'),
        category: document.getElementById('filterCategory'),
        objective: document.getElementById('filterObjective'),
      price: document.getElementById('filterPrice'),
      sale: document.getElementById('filterSale'),
      popular: document.getElementById('filterPopular'),
      isNew: document.getElementById('filterNew'),
      sort: document.getElementById('sortSelect'),
      reset: document.getElementById('filterReset')
    };

    const resultCount = document.getElementById('resultsCount');
    const resultsTotal = document.getElementById('resultsTotal');
    const grid = document.getElementById('plpGrid');
    const searchSummary = document.getElementById('searchSummary');
    const catalogStatus = document.getElementById('catalogStatus');
    const paginationNav = document.getElementById('pagination');
      const paginationStatus = document.getElementById('paginationStatus');
      const paginationRange = document.getElementById('paginationRange');
      const paginationCount = document.getElementById('paginationCount');
      const limitSelect = document.getElementById('pageLimit');
      const quickBrandFunat = document.getElementById('quickBrandFunat');
      const quickBrandFunatVitamins = document.getElementById('quickBrandFunatVitamins');
      const quickBrandNutramerican = document.getElementById('quickBrandNutramerican');

    const objectiveMap = {
      energia: ['energia', 'energía', 'rendimiento'],
      inmunidad: ['inmunidad', 'defensas'],
      piel: ['piel', 'colageno', 'colágeno'],
      estres: ['estres', 'estrés', 'sueño', 'relajacion', 'relajación']
    };
    const categoryKeywordMap = {
      omega: ['omega', 'omega 3', 'omega-3', 'epa', 'dha', 'aceite de pescado', 'acidos grasos']
    };
    const categoryLabels = {
      vitaminas: 'Vitaminas',
      minerales: 'Minerales',
      omega: 'Omega y aceites',
      colageno: 'Colágeno',
      energia: 'Energía',
      inmunidad: 'Inmunidad',
      maquillaje: 'Maquillaje'
    };
    const objectiveLabels = {
      energia: 'Energía y rendimiento',
      inmunidad: 'Inmunidad',
      piel: 'Piel y colágeno',
      estres: 'Estrés y sueño'
    };
    const defaultTitle = 'Catálogo de suplementos en Colombia | Natural Be';
    const defaultDescription = 'Explora el catálogo de suplementos Natural Be. Filtra por categoría, objetivo o precio y compra con pagos seguros en Colombia.';

    function getQuerySeoProfile(query) {
      const q = normalizeText(query)
        .replace(/\bmultivitaminicos?\b/g, 'multivitaminico')
        .replace(/\s+/g, ' ')
        .trim();

      if (!q) return null;

      if (q.includes('multivitaminico') && (q.includes('hombre') || q.includes('hombres'))) {
        return {
          title: 'Multivitamínico para Hombre en Colombia | Natural Be',
          description: 'Encuentra multivitamínico para hombre en Colombia. Compara opciones y compra online con envío rápido y pagos seguros en Natural Be.'
        };
      }

      if (q.includes('multivitaminico')) {
        return {
          title: 'Multivitamínicos en Colombia | Natural Be',
          description: 'Compra multivitamínicos en Colombia para hombres y mujeres. Encuentra opciones para tu rutina diaria con envío rápido en Natural Be.'
        };
      }

      if (q.includes('vitamina c')) {
        return {
          title: 'Vitamina C en Colombia | Natural Be',
          description: 'Compra vitamina C en Colombia: 500 mg, 1000 mg y fórmulas con zinc. Envío rápido y pagos seguros en Natural Be.'
        };
      }

      if (q.includes('vitamina d3') || q.includes('colecalciferol') || q.includes('d3')) {
        return {
          title: 'Vitamina D3 en Colombia | Natural Be',
          description: 'Encuentra vitamina D3 en Colombia, incluyendo opciones 2000 UI y combinaciones con calcio o K2. Compra online en Natural Be.'
        };
      }

      if (q.includes('complejo b') || q.includes('b-vit') || q.includes('b vit')) {
        return {
          title: 'Complejo B en Colombia | Natural Be',
          description: 'Compra complejo B en Colombia en cápsulas y tabletas para tu rutina diaria. Envío rápido y pagos seguros en Natural Be.'
        };
      }

      if (q.includes('vitamina e') && (q.includes('1000') || q.includes('1000 ui') || q.includes('1000iu'))) {
        return {
          title: 'Vitamina E 1000 UI en Colombia | Natural Be',
          description: 'Encuentra vitamina E 1000 UI en Colombia y compara opciones disponibles para compra online segura en Natural Be.'
        };
      }

      if (q.includes('citrato de magnesio')) {
        return {
          title: 'Citrato de Magnesio en Colombia | Natural Be',
          description: 'Compra citrato de magnesio en Colombia en cápsulas y tabletas. Envío rápido y pagos seguros en Natural Be.'
        };
      }

      if (q.includes('magnesio')) {
        return {
          title: 'Magnesio en Colombia | Natural Be',
          description: 'Encuentra magnesio en Colombia para tu rutina diaria. Compra online con envío rápido y pagos seguros en Natural Be.'
        };
      }

      if (q.includes('zinc')) {
        return {
          title: 'Zinc en Colombia | Natural Be',
          description: 'Compra suplemento de zinc en Colombia en presentación cápsulas y tabletas. Envío rápido y pagos seguros en Natural Be.'
        };
      }

      if (q.includes('calcio') && (q.includes('vitamina d3') || q.includes('d3') || q.includes('vitamina d'))) {
        return {
          title: 'Calcio con Vitamina D3 en Colombia | Natural Be',
          description: 'Compra calcio con vitamina D3 en Colombia. Encuentra opciones para tu bienestar diario con envío rápido en Natural Be.'
        };
      }

      if (q.includes('colageno') && q.includes('hidrolizado')) {
        return {
          title: 'Colágeno Hidrolizado en Colombia | Natural Be',
          description: 'Compra colágeno hidrolizado en Colombia para tu rutina diaria. Encuentra opciones con envío rápido y pagos seguros en Natural Be.'
        };
      }

      if (q.includes('colageno') && q.includes('vitamina c')) {
        return {
          title: 'Colágeno con Vitamina C en Colombia | Natural Be',
          description: 'Encuentra colágeno con vitamina C en Colombia. Compra online con envío rápido y pagos seguros en Natural Be.'
        };
      }

      if (q.includes('colageno') && q.includes('articul')) {
        return {
          title: 'Colágeno para Articulaciones en Colombia | Natural Be',
          description: 'Compra colágeno para articulaciones en Colombia. Opciones en cápsulas y más con entrega rápida en Natural Be.'
        };
      }

      if (q.includes('colageno') && q.includes('piel')) {
        return {
          title: 'Colágeno para la Piel en Colombia | Natural Be',
          description: 'Encuentra colágeno para la piel en Colombia. Compra online con pagos seguros y envío rápido en Natural Be.'
        };
      }

      if (q.includes('colageno')) {
        return {
          title: 'Colágeno en Colombia | Natural Be',
          description: 'Compra colágeno en Colombia: hidrolizado, con vitamina C y otras opciones para tu bienestar diario en Natural Be.'
        };
      }

      if (q.includes('comprar') && q.includes('suplement')) {
        return {
          title: 'Comprar Suplementos en Colombia | Natural Be',
          description: 'Compra suplementos en Colombia con envío rápido y pagos seguros. Vitaminas, minerales, omega, colágeno y más en Natural Be.'
        };
      }

      if (q.includes('suplement') && q.includes('original')) {
        return {
          title: 'Suplementos Originales en Colombia | Natural Be',
          description: 'Compra suplementos originales en Colombia con envío a toda Colombia y pagos seguros en Natural Be.'
        };
      }

      if (q.includes('barranquilla') && (q.includes('tienda naturista') || q.includes('tiendas naturistas') || q.includes('naturista'))) {
        return {
          title: 'Tienda Naturista en Barranquilla | Natural Be',
          description: 'Encuentra una tienda naturista en Barranquilla con suplementos y vitaminas para tu rutina diaria. Compra online con pago seguro en Natural Be.'
        };
      }

      if (q.includes('barranquilla') && q.includes('vitamin')) {
        return {
          title: 'Vitaminas en Barranquilla | Natural Be',
          description: 'Compra vitaminas en Barranquilla con entrega rápida y pagos seguros. Compara multivitamínicos, vitamina C y D3 en Natural Be.'
        };
      }

      if (q.includes('barranquilla') && q.includes('suplement')) {
        return {
          title: 'Suplementos en Barranquilla | Natural Be',
          description: 'Compra suplementos en Barranquilla con envío rápido y pago seguro. Encuentra colágeno, omega, minerales y más en Natural Be.'
        };
      }

      if ((q.includes('tienda') && q.includes('vitamin')) || q.includes('vitaminas en colombia')) {
        return {
          title: 'Tienda de Vitaminas en Colombia | Natural Be',
          description: 'Tienda de vitaminas en Colombia con opciones para tu rutina diaria. Compra online con envío rápido en Natural Be.'
        };
      }

      if ((q.includes('comprar') && q.includes('vitamin') && q.includes('internet')) || q.includes('vitaminas por internet')) {
        return {
          title: 'Comprar Vitaminas por Internet en Colombia | Natural Be',
          description: 'Compra vitaminas por internet en Colombia con envío a toda Colombia y pagos seguros en Natural Be.'
        };
      }

      if (q.includes('tienda naturista') || (q.includes('naturista') && q.includes('online'))) {
        return {
          title: 'Tienda Naturista Online en Colombia | Natural Be',
          description: 'Compra suplementos y vitaminas en una tienda naturista online en Colombia. Entrega rápida y pago seguro en Natural Be.'
        };
      }

      if (q.includes('suplement') && q.includes('natural')) {
        return {
          title: 'Suplementos Naturales en Colombia | Natural Be',
          description: 'Encuentra suplementos naturales en Colombia y compra online con envío a toda Colombia en Natural Be.'
        };
      }

      if (q.includes('suplement') && q.includes('envio') && q.includes('colombia')) {
        return {
          title: 'Suplementos con Envío a Toda Colombia | Natural Be',
          description: 'Compra suplementos con envío a toda Colombia. Pagos seguros y catálogo completo en Natural Be.'
        };
      }

      if (q.includes('pago') && q.includes('seguro') && q.includes('suplement')) {
        return {
          title: 'Suplementos con Pagos Seguros en Colombia | Natural Be',
          description: 'Compra suplementos en Colombia con pagos seguros y envío rápido. Tienda online Natural Be.'
        };
      }

      if (q.includes('suplementos dietarios') || q.includes('suplemento dietario')) {
        return {
          title: 'Suplementos Dietarios en Colombia | Natural Be',
          description: 'Encuentra suplementos dietarios en Colombia y compra online con pagos seguros y envíos rápidos en Natural Be.'
        };
      }

      if ((q.includes('aceite de pescado') || q.includes('fish oil')) && q.includes('omega')) {
        return {
          title: 'Aceite de Pescado Omega 3 en Colombia | Natural Be',
          description: 'Compra aceite de pescado Omega 3 en Colombia. Encuentra fish oil en cápsulas con envío rápido y pagos seguros en Natural Be.'
        };
      }

      if (q.includes('omega') && (q.includes('precio') || q.includes('precios'))) {
        return {
          title: 'Omega 3 Precio en Colombia | Natural Be',
          description: 'Compara precio de Omega 3 en Colombia y compra online en Natural Be. Opciones en cápsulas con envío rápido.'
        };
      }

      if (q.includes('omega') && (q.includes('capsulas') || q.includes('cápsulas') || q.includes('pastillas'))) {
        return {
          title: 'Omega 3 Cápsulas en Colombia | Natural Be',
          description: 'Encuentra Omega 3 en cápsulas en Colombia. Compra online con pagos seguros y envío rápido en Natural Be.'
        };
      }

      if (q.includes('omega 3') || q === 'omega' || q.startsWith('omega ')) {
        return {
          title: 'Omega 3 en Colombia | Natural Be',
          description: 'Compra Omega 3 en Colombia: cápsulas, fish oil y opciones para tu rutina diaria. Envío rápido y pagos seguros en Natural Be.'
        };
      }

      return {
        title: `Resultados para "${query}" | Natural Be`,
        description: `Resultados de suplementos para "${query}" en Natural Be. Filtra por categoría, objetivo y precio para encontrar tu mejor opción.`
      };
    }

    function normalizeText(value) {
      return String(value || '')
        .toLowerCase()
        .normalize('NFD')                    // Descomponer caracteres acentuados
        .replace(/[\u0300-\u036f]/g, '')     // Remover marcas diacríticas
        .replace(/\s+/g, ' ')                // Normalizar espacios múltiples a uno
        .trim();
    }

    const defaultCategory = normalizeText(window.NB_DEFAULT_CATEGORY || '');
    const defaultObjective = normalizeText(window.NB_DEFAULT_OBJECTIVE || '');
    const knownCategorySlugs = new Set([
      'vitaminas', 'minerales', 'omega', 'colageno', 'energia', 'inmunidad',
      'antioxidantes', 'huesos', 'cabello', 'digestivos', 'cuidado-piel',
      'cuidado-intimo', 'cuidado-adulto', 'antisepticos', 'medicamentos',
      'maquillaje',
      'nutricion', 'suplementos', 'suplementos-dietarios', 'botanitas', 'satibo'
    ]);

    function toSeoSlug(value) {
      return normalizeText(value)
        .replace(/[^a-z0-9]+/g, '-')
        .replace(/^-+|-+$/g, '');
    }

    function getCategoryRouteContext() {
      const path = (window.location && window.location.pathname) || '';
      const match = path.match(/^\/categoria\/([a-z0-9-]+)\/?$/i);
      if (!match) {
        return { routeSlug: '', routeCategory: '', routeQuery: '' };
      }
      const routeSlug = normalizeText(decodeURIComponent(match[1] || ''));
      if (!routeSlug) {
        return { routeSlug: '', routeCategory: '', routeQuery: '' };
      }
      if (knownCategorySlugs.has(routeSlug)) {
        return { routeSlug, routeCategory: routeSlug, routeQuery: '' };
      }
      return { routeSlug, routeCategory: '', routeQuery: routeSlug.replace(/-/g, ' ') };
    }

    function matchesObjective(product, objective) {
      if (!objective || objective === 'all') return true;
      const keywords = objectiveMap[objective] || [objective];
      const haystack = [product.categoria, product.subcategoria, ...(product.tags || [])].map(normalizeText).join(' ');
      return keywords.some((key) => haystack.includes(normalizeText(key)));
    }

    function matchesCategory(product, category) {
      if (!category || category === 'all') return true;
      const normalizedCategory = normalizeText(category);
      const productCategory = normalizeText(product.categoria);
      const productSubcategory = normalizeText(product.subcategoria);
      if (productCategory === normalizedCategory || productSubcategory === normalizedCategory) return true;
      const keywords = categoryKeywordMap[normalizedCategory];
      if (!keywords || !keywords.length) return false;
      const haystack = [product.nombre, product.categoria, product.subcategoria, ...(product.tags || [])]
        .map(normalizeText)
        .join(' ');
      return keywords.some((key) => haystack.includes(normalizeText(key)));
    }

    window.matchesQuery = function matchesQuery(product, query) {
      if (!query) return true;
      
      const normalizedQuery = normalizeText(query);
      
      // Si la búsqueda es un término simple, usar includes directo
      if (normalizedQuery.split(' ').length === 1) {
        const searchFields = [
          product.nombre,
          product.marca,
          product.categoria,
          product.subcategoria,
          product.descripcion_corta,
          ...(product.tags || [])
        ];
        
        return searchFields.some(field => {
          const normalizedField = normalizeText(field);
          return normalizedField.includes(normalizedQuery);
        });
      }
      
      // Para búsquedas múltiples, usar la lógica avanzada
      const searchTerms = normalizedQuery.split(' ').filter(term => term.length > 1);
      if (searchTerms.length === 0) return true;
      
      const searchFields = [
        { field: product.nombre, weight: 3 },
        { field: product.marca, weight: 2 },
        { field: product.categoria, weight: 3 },
        { field: product.subcategoria, weight: 2 },
        { field: product.descripcion_corta, weight: 1 },
        ...(product.tags || []).map(tag => ({ field: tag, weight: 2 }))
      ];
      
      let totalScore = 0;
      let maxPossibleScore = searchTerms.length * 3;
      
      for (const term of searchTerms) {
        let termScore = 0;
        
        for (const { field, weight } of searchFields) {
          const normalizedField = normalizeText(field);
          
          if (normalizedField.includes(term)) {
            termScore += weight;
            
            if (normalizedField.startsWith(term)) {
              termScore += weight * 0.5;
            }
            
            if (normalizedField === term) {
              termScore += weight * 2;
            }
          }
        }
        
        totalScore += termScore;
      }
      
      const threshold = maxPossibleScore * 0.3;
      return totalScore >= threshold;
    }

    function getChecked(el) {
      return !!(el && el.checked);
    }

    window.applyFilters = function applyFilters(list) {
      const query = getSearchTerm();
      
      const categoryRaw = getInputValue(filterEls.category, 'all');
        const categoryAliases = {
          'omega-y-aceites': 'omega',
          'omega & aceites': 'omega',
          'omega': 'omega',
          'colageno': 'colageno',
          'colágeno': 'colageno'
        };
        const category = categoryAliases[normalizeText(categoryRaw)] || normalizeText(categoryRaw);
        const brand = normalizeText(getInputValue(filterEls.brand, 'all'));
        const objective = getInputValue(filterEls.objective, 'all');
        const price = getInputValue(filterEls.price, 'all');
        const sale = getChecked(filterEls.sale);
        const popular = getChecked(filterEls.popular);
        const isNew = getChecked(filterEls.isNew);
  
        let filtered = list.filter((product) => {
          if (!matchesCategory(product, category)) return false;
          if (brand !== 'all' && normalizeText(product.marca) !== brand) return false;
          if (!matchesObjective(product, objective)) return false;
        if (!matchesQuery(product, query)) return false;
        if (sale && !(product.discountPercent > 0 || product.es_2x1 || product.isPack)) return false;
        if (popular && !product.isPopular) return false;
        if (isNew && !product.isNew) return false;
        if (price !== 'all') {
          const [min, max] = price.split('-').map(Number);
          const value = Number(product.precio_oferta || product.precio || 0);
          if (value < min || value > max) return false;
        }
        return true;
      });

      switch (getInputValue(filterEls.sort, 'featured')) {
        case 'price-asc':
          filtered.sort((a, b) => (a.precio_oferta || a.precio) - (b.precio_oferta || b.precio));
          break;
        case 'price-desc':
          filtered.sort((a, b) => (b.precio_oferta || b.precio) - (a.precio_oferta || a.precio));
          break;
        case 'name':
          filtered.sort((a, b) => (a.nombre || '').localeCompare(b.nombre || ''));
          break;
        default:
          break;
      }

      return filtered;
    }

    function escapeHtml(value) {
      return String(value || '')
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#39;');
    }
    function sanitizeUrl(value) {
      const raw = String(value || '');
      if (/^\s*javascript:/i.test(raw)) return '#';
      return raw;
    }
    function debounce(fn, wait = 200) {
      let timer = null;
      return (...args) => {
        if (timer) clearTimeout(timer);
        timer = setTimeout(() => fn(...args), wait);
      };
    }
    function getInputValue(el, fallback = '') {
      return el && typeof el.value !== 'undefined' ? el.value : fallback;
    }
    function getLimitByViewport() {
      if (window.matchMedia('(max-width: 640px)').matches) return 12;
      if (window.matchMedia('(max-width: 980px)').matches) return 18;
      return 24;
    }
    function getLimitFromStorage() {
      const raw = Number(localStorage.getItem('nb_catalog_limit'));
      if ([12, 18, 24, 48].includes(raw)) return raw;
      return null;
    }
    function getLimitFromUrl() {
      const params = new URLSearchParams(window.location.search);
      const raw = Number(params.get('limit'));
      if ([12, 18, 24, 48].includes(raw)) return raw;
      const stored = getLimitFromStorage();
      return stored || getLimitByViewport();
    }
    function applyResponsiveLimitOverride() {
      if (!limitSelect) return;
      const params = new URLSearchParams(window.location.search);
      if (params.has('limit')) return;
      const responsiveLimit = getLimitByViewport();
      limitSelect.value = String(responsiveLimit);
    }
    function getPageFromUrl(totalPages) {
      const params = new URLSearchParams(window.location.search);
      const raw = Number(params.get('page'));
      if (!Number.isFinite(raw) || raw < 1) return 1;
      if (totalPages && raw > totalPages) return totalPages;
      return raw;
    }
    function updateUrlParams(nextParams, options = {}) {
      const { replace = false } = options;
      const params = new URLSearchParams(window.location.search);
      Object.entries(nextParams).forEach(([key, value]) => {
        if (value === null || value === undefined || value === '') {
          params.delete(key);
        } else {
          params.set(key, String(value));
        }
      });
      const query = params.toString();
      const nextUrl = query ? `${window.location.pathname}?${query}` : window.location.pathname;
      if (replace) {
        history.replaceState({}, '', nextUrl);
      } else {
        history.pushState({}, '', nextUrl);
      }
      return params;
    }
    function updateFilterParamsInUrl(options = {}) {
      const route = getCategoryRouteContext();
      const params = new URLSearchParams(window.location.search);
      const query = getSearchTerm();
        const category = getInputValue(filterEls.category, 'all');
        const brand = getInputValue(filterEls.brand, 'all');
        const objective = getInputValue(filterEls.objective, 'all');
        if (query) params.set('q', query); else params.delete('q');
        if (category && category !== 'all') {
          if (route.routeCategory && route.routeCategory === normalizeText(category)) {
            params.delete('category');
            params.delete('categoria');
            params.delete('cat');
          } else {
            params.set('category', category);
          }
        } else {
          params.delete('category');
          params.delete('categoria');
          params.delete('cat');
        }
        if (brand && brand !== 'all') params.set('brand', brand); else params.delete('brand');
        if (objective && objective !== 'all') {
          params.set('objetivo', objective);
          params.delete('objective');
        } else {
          params.delete('objetivo');
          params.delete('objective');
        }
      const canUseCategoryPath = !query && (!brand || brand === 'all') && (!objective || objective === 'all') && category && category !== 'all';
      let nextPath = '/categoria/suplementos';
      if (canUseCategoryPath) {
        nextPath = `/categoria/${encodeURIComponent(toSeoSlug(category))}`;
      } else if (window.location.pathname && window.location.pathname.startsWith('/categoria/')) {
        nextPath = window.location.pathname;
      }
      const queryString = params.toString();
      const nextUrl = queryString ? `${nextPath}?${queryString}` : nextPath;
      if (options.replace) {
        history.replaceState({}, '', nextUrl);
      } else {
        history.pushState({}, '', nextUrl);
      }
      return params;
    }
    function ensurePaginationParams(page, limit) {
      const params = new URLSearchParams(window.location.search);
      let changed = false;
      if (params.get('page') === '1') {
        params.delete('page');
        changed = true;
      }
      const rawLimit = Number(params.get('limit'));
      if (params.has('limit') && ![12, 18, 24, 48].includes(rawLimit)) {
        params.delete('limit');
        changed = true;
      }
      if (!changed) return params;
      const query = params.toString();
      const nextUrl = query ? `${window.location.pathname}?${query}` : window.location.pathname;
      history.replaceState({}, '', nextUrl);
      return params;
    }
    function scrollToGrid() {
      if (!grid) return;
      grid.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
    function renderPaginationControls(page, totalPages, limit, totalItems, pageItemsCount) {
      if (!paginationNav || !paginationStatus) return;
      if (totalPages <= 1) {
        paginationNav.innerHTML = '';
        paginationStatus.textContent = '';
        if (paginationRange) paginationRange.textContent = '';
        if (paginationCount) paginationCount.textContent = '';
        return;
      }
      paginationStatus.textContent = `Página ${page} de ${totalPages}`;
      if (paginationRange) {
        const start = totalItems ? (page - 1) * limit + 1 : 0;
        const end = totalItems ? Math.min(start + pageItemsCount - 1, totalItems) : 0;
        paginationRange.textContent = totalItems ? `Mostrando ${start}–${end} de ${totalItems}` : '';
      }
      if (paginationCount) {
        paginationCount.textContent = totalItems ? `Total: ${totalItems} productos` : '';
      }
      const isCompact = window.matchMedia('(max-width: 640px)').matches;
      const pages = [];
      const maxVisible = 5;
      const half = Math.floor(maxVisible / 2);
      let start = Math.max(1, page - half);
      let end = Math.min(totalPages, start + maxVisible - 1);
      if (end - start < maxVisible - 1) {
        start = Math.max(1, end - maxVisible + 1);
      }
      if (!isCompact) {
        if (start > 1) pages.push(1);
        if (start > 2) pages.push('ellipsis-start');
        for (let p = start; p <= end; p++) pages.push(p);
        if (end < totalPages - 1) pages.push('ellipsis-end');
        if (end < totalPages) pages.push(totalPages);
      } else {
        pages.push(page);
      }

      const prevDisabled = page <= 1 ? 'disabled' : '';
      const nextDisabled = page >= totalPages ? 'disabled' : '';
      const prevAria = page <= 1 ? 'true' : 'false';
      const nextAria = page >= totalPages ? 'true' : 'false';

      const buttons = [
        `<button class="pagination-btn" data-page="${page - 1}" ${prevDisabled} aria-label="Página anterior" aria-disabled="${prevAria}">Anterior</button>`
      ];

      pages.forEach((item) => {
        if (typeof item === 'string') {
          buttons.push('<span class="pagination-ellipsis" aria-hidden="true">…</span>');
          return;
        }
        const isActive = item === page ? 'is-active' : '';
        const ariaCurrent = item === page ? 'aria-current="page"' : '';
        const label = isCompact ? `Página ${item}` : String(item);
        buttons.push(`<button class="pagination-btn ${isActive}" data-page="${item}" aria-label="Ir a la página ${item}" ${ariaCurrent}>${label}</button>`);
      });

      buttons.push(
        `<button class="pagination-btn" data-page="${page + 1}" ${nextDisabled} aria-label="Página siguiente" aria-disabled="${nextAria}">Siguiente</button>`
      );

      paginationNav.innerHTML = buttons.join('');
      paginationNav.dataset.limit = String(limit);
      paginationNav.dataset.totalPages = String(totalPages);
    }
    function updatePaginationLinks(page, totalPages, limit) {
      const params = new URLSearchParams(window.location.search);
      const origin = window.location.origin || 'https://naturalbe.com.co';
      const currentCategory = normalizeText(getInputValue(filterEls.category, 'all'));
      const basePath = currentCategory !== 'all'
        ? `/categoria/${encodeURIComponent(toSeoSlug(currentCategory))}`
        : '/categoria/suplementos';
      const base = `${origin}${basePath}`;
      const setRel = (rel, targetPage) => {
        let link = document.querySelector(`link[rel="${rel}"]`);
        if (targetPage < 1 || targetPage > totalPages) {
          if (link) link.remove();
          return;
        }
        if (!link) {
          link = document.createElement('link');
          link.setAttribute('rel', rel);
          document.head.appendChild(link);
        }
        const paramsRel = new URLSearchParams(params.toString());
        paramsRel.delete('limit');
        if (targetPage > 1) paramsRel.set('page', String(targetPage));
        else paramsRel.delete('page');
        const relQuery = paramsRel.toString();
        link.setAttribute('href', relQuery ? `${base}?${relQuery}` : base);
      };
      setRel('prev', page - 1);
      setRel('next', page + 1);
    }
    function getSearchTerm() {
      return filterEls.search && typeof filterEls.search.value === 'string'
        ? filterEls.search.value.trim()
        : '';
    }

      function getSeoContext() {
        return {
          query: getSearchTerm(),
          category: normalizeText(getInputValue(filterEls.category, 'all')),
          objective: normalizeText(getInputValue(filterEls.objective, 'all')),
          brand: normalizeText(getInputValue(filterEls.brand, 'all'))
        };
      }

    function updateCategorySeo(list) {
        const { query, category, objective, brand } = getSeoContext();
      const titleEl = document.querySelector('title');
      const metaDesc = document.querySelector('meta[name="description"]');
      const ogTitle = document.querySelector('meta[property="og:title"]');
      const ogDesc = document.querySelector('meta[property="og:description"]');
      const ogImage = document.querySelector('meta[property="og:image"]');
      const twitterTitle = document.querySelector('meta[name="twitter:title"]');
      const twitterDesc = document.querySelector('meta[name="twitter:description"]');
      const twitterImage = document.querySelector('meta[name="twitter:image"]');
      let canonical = document.querySelector('link[rel="canonical"]');
      const origin = window.location.origin || 'https://naturalbe.com.co';

      let title = defaultTitle;
      let description = defaultDescription;

        if (query) {
          const querySeo = getQuerySeoProfile(query);
          if (querySeo) {
            title = querySeo.title;
            description = querySeo.description;
          }
        } else if (brand !== 'all') {
          const brandLabel = brand.charAt(0).toUpperCase() + brand.slice(1);
          if (brand === 'funat' && category === 'vitaminas') {
            title = `Funat · Vitaminas en Colombia | Natural Be`;
            description = `Compra vitaminas Funat con envío rápido en Colombia. Descubre productos originales en Natural Be.`;
          } else {
            title = `Suplementos ${brandLabel} en Colombia | Natural Be`;
            description = `Compra suplementos ${brandLabel} con envío rápido en Colombia. Descubre productos originales en Natural Be.`;
          }
        } else if (category !== 'all' || objective !== 'all') {
        const categoryLabel = categoryLabels[category] || category;
        const objectiveLabel = objectiveLabels[objective] || objective;
        if (category !== 'all' && objective !== 'all') {
          title = `Suplementos de ${categoryLabel} para ${objectiveLabel} | Natural Be`;
          description = `Compra suplementos de ${categoryLabel} enfocados en ${objectiveLabel}. Pagos seguros y envíos rápidos en Colombia.`;
        } else if (category !== 'all') {
          title = `Suplementos de ${categoryLabel} en Colombia | Natural Be`;
          description = `Descubre suplementos de ${categoryLabel} con envío rápido en Colombia. Compra fácil y segura en Natural Be.`;
        } else {
          title = `Suplementos para ${objectiveLabel} en Colombia | Natural Be`;
          description = `Encuentra suplementos para ${objectiveLabel} con asesoría personalizada y pagos seguros en Colombia.`;
        }
      }

      if (titleEl) titleEl.textContent = title;
      if (metaDesc) metaDesc.setAttribute('content', description);
      if (ogTitle) ogTitle.setAttribute('content', title);
      if (ogDesc) ogDesc.setAttribute('content', description);
      if (twitterTitle) twitterTitle.setAttribute('content', title);
      if (twitterDesc) twitterDesc.setAttribute('content', description);
      if (ogImage || twitterImage) {
        const imageOverride = (brand === 'funat' && category === 'vitaminas')
          ? 'https://funat.co/wp-content/uploads/2025/02/imuniprobióticos60capsulas_-7706849119547_1_1200x1200_VITAMINASYSUPLEMENTOS_funat_col-300x300.jpg'
          : 'https://naturalbe.com.co/static/img/og-naturalbe.jpg';
        if (ogImage) ogImage.setAttribute('content', imageOverride);
        if (twitterImage) twitterImage.setAttribute('content', imageOverride);
      }
      if (!canonical) {
        canonical = document.createElement('link');
        canonical.setAttribute('rel', 'canonical');
        document.head.appendChild(canonical);
      }
      const canonicalParams = new URLSearchParams();
      if (query) canonicalParams.set('q', query);
      if (objective !== 'all') canonicalParams.set('objetivo', objective);
      if (brand !== 'all') canonicalParams.set('brand', brand);
      const canonicalQuery = canonicalParams.toString();
      const canonicalPath = query
        ? '/categoria/suplementos'
        : (category !== 'all'
          ? `/categoria/${encodeURIComponent(toSeoSlug(category))}`
          : '/categoria/suplementos');
      const canonicalHref = canonicalQuery
        ? `${origin}${canonicalPath}?${canonicalQuery}`
        : `${origin}${canonicalPath}`;
      canonical.setAttribute('href', canonicalHref);

      let ogUrl = document.querySelector('meta[property="og:url"]');
      if (!ogUrl) {
        ogUrl = document.createElement('meta');
        ogUrl.setAttribute('property', 'og:url');
        document.head.appendChild(ogUrl);
      }
      ogUrl.setAttribute('content', canonicalHref);

      if (typeof window.injectProductListSchema !== 'function') {
        updateItemListSchema(list);
      }
    }

    function buildItemUrl(product) {
      const origin = window.location.origin || 'https://naturalbe.com.co';
      const slug = product.slug || '';
        const rawUrl = (window.NaturalBe && typeof window.NaturalBe.buildProductURL === 'function')
          ? window.NaturalBe.buildProductURL(product)
          : (slug ? `/producto/${encodeURIComponent(slug)}` : '/categoria/suplementos');
      try {
        return new URL(rawUrl, origin).href;
      } catch (e) {
        return `${origin}/categoria/suplementos`;
      }
    }

    function updateItemListSchema(list) {
      const existing = document.getElementById('categoryItemList');
      if (existing) existing.remove();
      if (!Array.isArray(list) || !list.length) return;
      const items = list.slice(0, 20).map((product, index) => ({
        "@type": "ListItem",
        "position": index + 1,
        "item": {
          "@type": "Product",
          "name": String(product.nombre || product.name || 'Producto'),
          "url": buildItemUrl(product)
        }
      }));
      const schema = {
        "@context": "https://schema.org",
        "@type": "ItemList",
        "itemListElement": items
      };
      const script = document.createElement('script');
      script.type = 'application/ld+json';
      script.id = 'categoryItemList';
      script.textContent = JSON.stringify(schema);
      document.head.appendChild(script);
    }

    function renderEmptyState(query) {
      const safeQuery = query ? escapeHtml(query) : '';
      grid.innerHTML = `
        <div class="empty-state">
          <h3>No encontramos resultados${safeQuery ? ` para "${safeQuery}"` : ''}.</h3>
          <p>Prueba con otra palabra o explora estas opciones:</p>
          <div class="empty-state-actions">
            <a class="btn-primary" href="/#destacados-marcas">Ver destacados</a>
            <a class="btn-ghost" href="/categoria/suplementos">Ver catalogo completo</a>
            <a class="btn-outline" href="https://wa.me/573137212923?utm_source=naturalbe&utm_medium=website&utm_campaign=retail&utm_content=empty_whatsapp" target="_blank" rel="noopener">WhatsApp</a>
          </div>
        </div>
      `;
    }

    function highlightMatches(query) {
      if (!query || query.length < 2) return;
      const escaped = query.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');
      const regex = new RegExp(`(${escaped})`, 'gi');
      grid.querySelectorAll('.product-card__title a').forEach((link) => {
        const text = link.textContent;
        link.innerHTML = text.replace(regex, '<mark>$1</mark>');
      });
    }

      function renderSearchSummary(query) {
        if (!searchSummary) return;
        const brand = normalizeText(getInputValue(filterEls.brand, 'all'));
        const category = normalizeText(getInputValue(filterEls.category, 'all'));
        const hasQuery = !!query;
        const isFunatVitamins = brand === 'funat' && category === 'vitaminas';
        const shouldShow = hasQuery || isFunatVitamins;

        if (!shouldShow) {
          searchSummary.innerHTML = '';
          return;
        }

        const label = hasQuery
          ? `Resultados para: <strong>${escapeHtml(query)}</strong>`
          : 'Colección: <strong>Funat · Vitaminas</strong>';

        searchSummary.innerHTML = `
          <span>${label}</span>
          <button type="button" class="btn-ghost" id="clearSearch">Limpiar busqueda</button>
        `;
        const clearBtn = document.getElementById('clearSearch');
        if (clearBtn) {
          clearBtn.addEventListener('click', () => {
            if (filterEls.search) filterEls.search.value = '';
            if (filterEls.brand) filterEls.brand.value = 'all';
            if (filterEls.category) filterEls.category.value = 'all';
            const params = new URLSearchParams(window.location.search);
            params.delete('q');
            params.delete('brand');
            params.delete('marca');
            params.delete('category');
            params.delete('categoria');
            const nextUrl = params.toString()
              ? `${window.location.pathname}?${params.toString()}`
              : window.location.pathname;
            history.replaceState({}, '', nextUrl);
            syncQuickBrandChip();
            renderCategoryProducts(window.applyFilters(window.ALL_PRODUCTS || []));
          });
        }
      }

      function populateBrandFilter(list) {
        if (!filterEls.brand) return;
        const current = normalizeText(filterEls.brand.value || 'all');
        const brandMap = new Map();
        list.forEach((product) => {
          const raw = String(product.marca || '').trim();
          const key = normalizeText(raw);
          if (key && !brandMap.has(key)) brandMap.set(key, raw);
        });
        const sortedBrands = Array.from(brandMap.entries()).sort((a, b) => a[1].localeCompare(b[1]));
        const options = ['<option value="all">Todas</option>'];
        sortedBrands.forEach(([key, label]) => {
          options.push(`<option value="${key}">${label}</option>`);
        });
        filterEls.brand.innerHTML = options.join('');
        if (current && (current === 'all' || brandMap.has(current))) {
          filterEls.brand.value = current;
        }
        syncQuickBrandChip();
      }

      function syncQuickBrandChip() {
        if (quickBrandFunat && filterEls.brand) {
          const active = normalizeText(filterEls.brand.value) === 'funat';
          quickBrandFunat.classList.toggle('active', active);
        }
        if (quickBrandFunatVitamins && filterEls.brand && filterEls.category) {
          const brandActive = normalizeText(filterEls.brand.value) === 'funat';
          const categoryActive = normalizeText(filterEls.category.value) === 'vitaminas';
          quickBrandFunatVitamins.classList.toggle('active', brandActive && categoryActive);
        }
        if (quickBrandNutramerican && filterEls.brand) {
          const active = normalizeText(filterEls.brand.value) === 'nutramerican';
          quickBrandNutramerican.classList.toggle('active', active);
        }
      }
  
      function renderCatalogStatus(onRetry) {
      if (!catalogStatus) return;
      if (!window.NB_CATALOG_ERROR) {
        catalogStatus.innerHTML = '';
        return;
      }
      catalogStatus.innerHTML = `
        <div class="catalog-alert">
          <span>No pudimos cargar el catalogo.</span>
          <button class="btn-ghost" type="button" id="retryCatalog">Reintentar</button>
        </div>
      `;
      const retryBtn = document.getElementById('retryCatalog');
      if (retryBtn && typeof onRetry === 'function') {
        retryBtn.addEventListener('click', onRetry);
      }
    }

    function renderCatalogNotice() {
      const params = new URLSearchParams(window.location.search);
      const error = params.get('error');
      const notice = params.get('notice');
      if ((!error && !notice) || !catalogStatus) return;
      const messages = {
        'producto-no-encontrado': 'Producto no encontrado. Te mostramos el catálogo completo.'
      };
      const message = messages[error] || messages[notice];
      if (!message) return;
      catalogStatus.innerHTML = `
        <div class="catalog-alert">
          <span>${message}</span>
        </div>
      `;
      params.delete('error');
      params.delete('notice');
      const nextUrl = params.toString()
        ? `${window.location.pathname}?${params.toString()}`
        : window.location.pathname;
      history.replaceState({}, '', nextUrl);
      setTimeout(() => {
        if (catalogStatus && catalogStatus.innerHTML) {
          catalogStatus.innerHTML = '';
        }
      }, 5000);
    }

    function renderCategoryProducts(list) {
      if (resultCount) resultCount.textContent = '';
      if (resultsTotal) resultsTotal.textContent = list.length ? `(${list.length})` : '';
      updateCategorySeo(list);
      
      // Inyectar schemas para SEO
      if (typeof window.injectProductListSchema === 'function') {
        const params = new URLSearchParams(window.location.search);
        const category = params.get('category') || '';
        const query = params.get('q') || '';

        let title = 'Catálogo - Natural Be';
        let description = 'Explora nuestro catálogo de suplementos naturales.';

        if (query) {
          const querySeo = getQuerySeoProfile(query);
          if (querySeo) {
            title = querySeo.title;
            description = querySeo.description;
          }
        } else if (category) {
          const categoryNames = {
            'vitaminas': 'Vitaminas',
            'minerales': 'Minerales',
            'omega': 'Omega y Aceites',
            'colageno': 'Colágeno',
            'energia': 'Suplementos de Energía',
            'inmunidad': 'Suplementos para la Inmunidad',
            'antioxidantes': 'Antioxidantes',
            'maquillaje': 'Maquillaje'
          };
          const displayName = categoryNames[category] || category;
          title = `${displayName} - Natural Be`;
          description = `Compra ${displayName.toLowerCase()} naturales en Colombia. Envío 24-48h, pagos seguros.`;
        }

        const canonicalLinkEl = document.querySelector('link[rel="canonical"]');
        const listUrl = canonicalLinkEl ? canonicalLinkEl.getAttribute('href') : window.location.href;
        window.injectProductListSchema(list.slice(0, 50), { title, description, listUrl });

        const breadcrumbs = [
          { name: 'Inicio', url: 'https://naturalbe.com.co/' },
          { name: 'Catálogo', url: 'https://naturalbe.com.co/categoria/suplementos' }
        ];

        if (category || query) {
          breadcrumbs.push({
            name: query ? `Búsqueda: ${query}` : (category || 'Productos'),
            url: window.location.href
          });
        }

        if (typeof window.injectBreadcrumbSchema === 'function') {
          window.injectBreadcrumbSchema(breadcrumbs);
        }
      }
      
      const totalItems = Array.isArray(list) ? list.length : 0;
      const limit = getLimitFromUrl();
      const totalPages = totalItems ? Math.ceil(totalItems / limit) : 1;
      const page = getPageFromUrl(totalPages);
      ensurePaginationParams(page, limit);
      updatePaginationLinks(page, totalPages, limit);

      const start = (page - 1) * limit;
      const pageItems = list.slice(start, start + limit);
      renderPaginationControls(page, totalPages, limit, totalItems, pageItems.length);

      if (!totalItems) {
        renderEmptyState(getSearchTerm());
        return;
      }

      if (grid) {
        grid.innerHTML = '<div class="catalog-loading" role="status" aria-live="polite">Cargando...</div>';
      }

      requestAnimationFrame(() => {
        if (!window.nbMarketplace || typeof window.nbMarketplace.renderProductGrid !== 'function') {
          renderBasicGrid(pageItems);
          return;
        }
        window.nbMarketplace.renderProductGrid(pageItems, grid);
        if (!pageItems.length) {
          renderEmptyState(getSearchTerm());
        } else {
          highlightMatches(getSearchTerm());
        }
      });
    }

    function renderBasicGrid(list) {
      if (!grid) return;
      if (!list.length) {
        renderEmptyState(getSearchTerm());
        return;
      }
      const html = list.map((product) => {
        const name = product.nombre || product.name || '';
        const price = Number(product.precio_oferta || product.precio || product.price || 0);
        const img = product.imagen_principal || product.image || './static/img/placeholder.webp';
        const ratingValue = Number(product.rating_value || 0);
        const ratingCount = Number(product.rating_count || 0);
        const url = (window.NaturalBe && typeof window.NaturalBe.buildProductURL === 'function')
          ? window.NaturalBe.buildProductURL(product)
          : (product.slug ? `/producto/${encodeURIComponent(product.slug)}` : '/categoria/suplementos');
        const ratingText = ratingValue > 0
          ? `${ratingValue.toFixed(1)} (${ratingCount || 0})`
          : 'Valorado por clientes';
        const safeName = escapeHtml(name);
        const safeDesc = escapeHtml(product.descripcion_corta || product.description || '');
        const safeImg = escapeHtml(sanitizeUrl(img));
        const safeUrl = escapeHtml(sanitizeUrl(url));
        return `
          <article class="product-card">
            <a class="product-card__media" href="${safeUrl}">
              <img src="${safeImg}" alt="${safeName}" loading="lazy" width="320" height="220" onerror="this.onerror=null;this.src='./static/img/placeholder.webp';">
            </a>
            <div class="product-card__body">
              <h3 class="product-card__title">
                <a href="${safeUrl}">${safeName}</a>
              </h3>
              <p class="product-card__desc">${safeDesc}</p>
              <div class="product-card__proof">
                <span class="proof-chip"><span aria-hidden="true">⭐</span>${ratingText}</span>
                ${product.stock_bajo ? '<span class="proof-chip is-urgency"><span aria-hidden="true">⚡</span>Stock limitado</span>' : ''}
              </div>
              <div class="product-card__price">
                <span>$${price.toLocaleString('es-CO')}</span>
              </div>
            </div>
          </article>
        `;
      }).join('');
      grid.innerHTML = html;
    }

    function normalizeBasicProduct(p) {
      const slug = p.slug || '';
      return {
        nombre: p.nombre || p.name || '',
        descripcion_corta: p.descripcion_corta || p.description || '',
        precio: Number(p.precio || p.price || 0),
        precio_oferta: p.precio_oferta != null ? Number(p.precio_oferta) : null,
        imagen_principal: p.imagen_principal || p.image || '',
        categoria: p.categoria || p.category || '',
        subcategoria: p.subcategoria || null,
        tags: p.tags || [],
        url: (window.NaturalBe && typeof window.NaturalBe.buildProductURL === 'function')
          ? window.NaturalBe.buildProductURL(p)
          : (slug ? `/producto/${encodeURIComponent(slug)}` : '/categoria/suplementos')
      };
    }

    async function fetchCatalogDirect() {
      const version = window.NB_DATA_VERSION || '1';
      const urls = [
        `./static/data/productos.json?v=${encodeURIComponent(version)}`,
        `/static/data/productos.json?v=${encodeURIComponent(version)}`
      ];
      let lastError = null;
      for (const url of urls) {
        try {
          const res = await fetch(url, { cache: 'no-store' });
          if (!res.ok) throw new Error(`Catalog fetch failed: ${res.status}`);
          const list = await res.json();
          window.NB_CATALOG_ERROR = false;
          window.NB_CATALOG_ERROR_MESSAGE = '';
          return Array.isArray(list) ? list.map(normalizeBasicProduct) : [];
        } catch (err) {
          lastError = err;
        }
      }
      window.NB_CATALOG_ERROR = true;
      window.NB_CATALOG_ERROR_MESSAGE = (lastError && lastError.message) || 'No pudimos cargar el catalogo.';
      return [];
    }

    function syncFromUrl() {
      const route = getCategoryRouteContext();
      const params = new URLSearchParams(window.location.search);
      const query = params.get('q') || route.routeQuery || '';
        const category = params.get('categoria') || params.get('category') || params.get('cat') || route.routeCategory || defaultCategory || 'all';
        const brand = params.get('brand') || params.get('marca') || 'all';
        const objective = params.get('objetivo') || params.get('objective') || defaultObjective || 'all';
        if (query && filterEls.search) filterEls.search.value = query;
        if (category && filterEls.category) filterEls.category.value = category;
        if (brand && filterEls.brand) filterEls.brand.value = brand;
        if (objective && filterEls.objective) filterEls.objective.value = objective;
        syncQuickBrandChip();
        const limit = getLimitFromUrl();
        if (limitSelect) limitSelect.value = String(limit);
      }

    window.bindFilters = function bindFilters(list) {
      // Prevenir listeners duplicados
      if (window.__bindFiltersDone) return;
      window.__bindFiltersDone = true;
      
      const debouncedRender = debounce(() => renderCategoryProducts(window.applyFilters(list)), 200);
      const debouncedSummary = debounce(() => {
        renderSearchSummary(getSearchTerm());
      }, 100);
      
      // Search input (con debounce)
      if (filterEls.search) {
        filterEls.search.addEventListener('input', () => {
          updateFilterParamsInUrl({ replace: true });
          updateUrlParams({ page: 1 }, { replace: true });
          debouncedRender();
        });
        filterEls.search.addEventListener('input', debouncedSummary);
      }
      
      // Cambios en filtros (sin debounce)
        if (filterEls.category) {
          filterEls.category.addEventListener('change', () => {
            updateFilterParamsInUrl({ replace: true });
            updateUrlParams({ page: 1 }, { replace: true });
            renderCategoryProducts(window.applyFilters(list));
          });
        }
        
        if (filterEls.brand) {
          filterEls.brand.addEventListener('change', () => {
            updateFilterParamsInUrl({ replace: true });
            updateUrlParams({ page: 1 }, { replace: true });
            syncQuickBrandChip();
            renderCategoryProducts(window.applyFilters(list));
          });
        }
        
        if (quickBrandFunat && filterEls.brand) {
          quickBrandFunat.addEventListener('click', () => {
            filterEls.brand.value = 'funat';
            updateFilterParamsInUrl({ replace: true });
            updateUrlParams({ page: 1 }, { replace: true });
            syncQuickBrandChip();
            renderCategoryProducts(window.applyFilters(list));
          });
        }
        
        if (quickBrandFunatVitamins && filterEls.brand && filterEls.category) {
          quickBrandFunatVitamins.addEventListener('click', () => {
            filterEls.brand.value = 'funat';
            filterEls.category.value = 'vitaminas';
            updateFilterParamsInUrl({ replace: true });
            updateUrlParams({ page: 1 }, { replace: true });
            syncQuickBrandChip();
            renderCategoryProducts(window.applyFilters(list));
          });
        }
        
        if (quickBrandNutramerican && filterEls.brand) {
          quickBrandNutramerican.addEventListener('click', () => {
            filterEls.brand.value = 'nutramerican';
            updateFilterParamsInUrl({ replace: true });
            updateUrlParams({ page: 1 }, { replace: true });
            syncQuickBrandChip();
            renderCategoryProducts(window.applyFilters(list));
          });
        }
        
        if (filterEls.objective) {
          filterEls.objective.addEventListener('change', () => {
            updateFilterParamsInUrl({ replace: true });
          updateUrlParams({ page: 1 }, { replace: true });
          renderCategoryProducts(window.applyFilters(list));
        });
      }
      
      if (filterEls.price) {
        filterEls.price.addEventListener('change', () => {
          updateUrlParams({ page: 1 }, { replace: true });
          renderCategoryProducts(window.applyFilters(list));
        });
      }
      
      if (filterEls.sale) {
        filterEls.sale.addEventListener('change', () => {
          updateUrlParams({ page: 1 }, { replace: true });
          renderCategoryProducts(window.applyFilters(list));
        });
      }
      
      if (filterEls.popular) {
        filterEls.popular.addEventListener('change', () => {
          updateUrlParams({ page: 1 }, { replace: true });
          renderCategoryProducts(window.applyFilters(list));
        });
      }
      
      if (filterEls.isNew) {
        filterEls.isNew.addEventListener('change', () => {
          updateUrlParams({ page: 1 }, { replace: true });
          renderCategoryProducts(window.applyFilters(list));
        });
      }
      
      if (filterEls.sort) {
        filterEls.sort.addEventListener('change', () => {
          updateUrlParams({ page: 1 }, { replace: true });
          renderCategoryProducts(window.applyFilters(list));
        });
      }
      if (limitSelect) {
        limitSelect.addEventListener('change', () => {
          const nextLimit = Number(limitSelect.value) || getLimitByViewport();
          localStorage.setItem('nb_catalog_limit', String(nextLimit));
          updateUrlParams({ limit: nextLimit, page: 1 }, { replace: true });
          renderCategoryProducts(window.applyFilters(list));
        });
      }
      
      // Reset button
        if (filterEls.reset) {
          filterEls.reset.addEventListener('click', () => {
            if (filterEls.search) filterEls.search.value = '';
            if (filterEls.category) filterEls.category.value = 'all';
            if (filterEls.brand) filterEls.brand.value = 'all';
            if (filterEls.objective) filterEls.objective.value = 'all';
          if (filterEls.price) filterEls.price.value = 'all';
          if (filterEls.sale) filterEls.sale.checked = false;
            if (filterEls.popular) filterEls.popular.checked = false;
            if (filterEls.isNew) filterEls.isNew.checked = false;
            if (filterEls.sort) filterEls.sort.value = 'featured';
            syncQuickBrandChip();
            updateFilterParamsInUrl({ replace: true });
            updateUrlParams({ page: 1 }, { replace: true });
          renderCategoryProducts(window.applyFilters(list));
        });
      }
    }

    function initCatalog() {
      // Asegurar que el renderer del catálogo no sea sobrescrito por cart.js
      window.renderProducts = renderCategoryProducts;
      applyResponsiveLimitOverride();
      if (paginationNav && !paginationNav.dataset.bound) {
        paginationNav.addEventListener('click', (event) => {
          const btn = event.target.closest('[data-page]');
          if (!btn || btn.disabled) return;
          const targetPage = Number(btn.getAttribute('data-page'));
          if (!Number.isFinite(targetPage)) return;
          updateUrlParams({ page: targetPage }, { replace: false });
          renderCategoryProducts(window.applyFilters(window.ALL_PRODUCTS || []));
          scrollToGrid();
        });
        paginationNav.dataset.bound = '1';
      }
      if (window.location && window.location.protocol === 'file:' && catalogStatus) {
        catalogStatus.innerHTML = `
          <div class="catalog-alert">
            <span>Estas viendo el sitio en modo local (file://). Para cargar el catalogo completo usa un servidor local.</span>
          </div>
        `;
      }
        if (typeof window.loadProductsData !== 'function') {
          const products = window.ALL_PRODUCTS || window.PRODUCTS || [];
          if (products.length) {
            populateBrandFilter(products);
            syncFromUrl();
            window.bindFilters(products);
            renderCatalogNotice();
            renderCategoryProducts(window.applyFilters(products));
            renderCatalogStatus();
          } else {
            syncFromUrl();
            fetchCatalogDirect().then((list) => {
              window.ALL_PRODUCTS = list;
              populateBrandFilter(list);
              syncFromUrl();
              window.bindFilters(list);
              renderCatalogNotice();
              renderCategoryProducts(window.applyFilters(list));
              renderCatalogStatus();
            });
          }
          return;
        }
        syncFromUrl();
        window.loadProductsData()
          .then(() => {
            let products = window.ALL_PRODUCTS || [];
            if (!products.length) {
              return fetchCatalogDirect().then((list) => {
                window.ALL_PRODUCTS = list;
                products = list;
                populateBrandFilter(products);
                syncFromUrl();
                window.bindFilters(products);
                renderCategoryProducts(window.applyFilters(products));
                renderSearchSummary(getSearchTerm());
                renderCatalogStatus();
              });
            }
            populateBrandFilter(products);
            syncFromUrl();
            window.bindFilters(products);
            renderCatalogNotice();
            renderCategoryProducts(window.applyFilters(products));
            renderSearchSummary(getSearchTerm());
            renderCatalogStatus(() => {
            window.loadProductsData({ force: true }).then(() => {
              const refreshed = window.ALL_PRODUCTS || [];
              renderCategoryProducts(window.applyFilters(refreshed));
              renderCatalogStatus();
            });
          });
        })
          .catch((err) => {
            console.error('Error en loadProductsData:', err);
            syncFromUrl();
            fetchCatalogDirect().then((list) => {
              window.ALL_PRODUCTS = list;
              populateBrandFilter(list);
              syncFromUrl();
              window.bindFilters(list);
              renderCatalogNotice();
              renderCategoryProducts(window.applyFilters(list));
              renderSearchSummary(getSearchTerm());
            renderCatalogStatus();
          });
        });
    }

    window.addEventListener('popstate', () => {
      const products = window.ALL_PRODUCTS || [];
      if (products.length) {
        renderCategoryProducts(window.applyFilters(products));
      }
    });

    // Esperar a que DOM esté listo Y a que los scripts hayan cargado
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        // Esperar a que products-data.js esté listo
        if (typeof window.loadProductsData === 'function') {
          initCatalog();
        } else {
          window.addEventListener('ProductsDataReady', initCatalog, { once: true });
        }
      });
    } else {
      // Si el DOM ya está listo
      if (typeof window.loadProductsData === 'function') {
        initCatalog();
      } else {
        window.addEventListener('ProductsDataReady', initCatalog, { once: true });
      }
    }
  })();
  </script>

    <script>
      (function initAlgoliaSiteSearch() {
        var statusEl = document.getElementById('searchStatus');
        var loaded = false;
        var loading = false;
        var initialized = false;

        function appendCssOnce() {
          if (document.querySelector('link[data-algolia-css="1"]')) return;
          var css = document.createElement('link');
          css.rel = 'stylesheet';
          css.href = 'https://cdn.jsdelivr.net/npm/@algolia/sitesearch@1/dist/search.min.css';
          css.setAttribute('data-algolia-css', '1');
          document.head.appendChild(css);
        }

        function initWidget() {
          if (initialized) return;
          initialized = true;
          var searchContainer = document.querySelector('#search');
          if (!searchContainer) return;
          if (!window.SiteSearch || typeof window.SiteSearch.init !== 'function') {
            if (statusEl) statusEl.textContent = 'No se pudo cargar la busqueda de Algolia.';
            return;
          }
          window.SiteSearch.init({
            container: '#search',
            applicationId: 'D1QMI6KRFW',
            apiKey: '565ee67bc8af52c7121379ce2fb2ffaa',
            indexName: 'productos.algolia',
            attributes: {
              primaryText: 'nombre',
              secondaryText: 'marca',
              tertiaryText: 'precio_final',
              url: 'url',
              image: 'imagen'
            },
            darkMode: false
          });
          loaded = true;
          if (statusEl) statusEl.textContent = 'Busqueda activa. Prueba con: omega, magnesio, colageno.';
        }

        function loadAssetsAndInit() {
          if (loaded || loading) return;
          loading = true;
          appendCssOnce();
          var script = document.createElement('script');
          script.src = 'https://cdn.jsdelivr.net/npm/@algolia/sitesearch@1/dist/search.min.js';
          script.async = true;
          script.onload = function () {
            loading = false;
            try {
              initWidget();
            } catch (_) {
              if (statusEl) statusEl.textContent = 'Error al inicializar Algolia SiteSearch.';
            }
          };
          script.onerror = function () {
            loading = false;
            if (statusEl) statusEl.textContent = 'No se pudo cargar el script de Algolia.';
          };
          document.head.appendChild(script);
        }

        var triggerInput = document.getElementById('siteSearch');
        if (triggerInput) {
          triggerInput.addEventListener('focus', loadAssetsAndInit, { once: true });
          triggerInput.addEventListener('pointerdown', loadAssetsAndInit, { once: true, passive: true });
        }
        var searchBox = document.getElementById('search');
        if (searchBox) {
          searchBox.addEventListener('mouseenter', loadAssetsAndInit, { once: true, passive: true });
        }
        window.addEventListener('keydown', function (evt) {
          if ((evt.ctrlKey || evt.metaKey) && String(evt.key || '').toLowerCase() === 'k') {
            loadAssetsAndInit();
          }
        }, { passive: true });
      })();
    </script>

    <!-- FIX DE BÚSQUEDA OPTIMIZADA -->
    <script src="/static/js/category-search-fix.js?v=2026-02-01" defer></script>
    
  <script src="/static/js/site-pause.js" defer></script>
</body>
</html>


















