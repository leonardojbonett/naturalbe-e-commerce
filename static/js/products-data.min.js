!function(){const a=["/productos.json","/static/data/productos.json","./static/data/productos.json"],o=[{id:"1001",slug:"colageno-hidrolizado-500mg",nombre:"Colageno Hidrolizado 500mg",marca:"Natural Be",categoria:"colageno",precio:25e3,tags:["piel","articulaciones"],descripcion_corta:"Colageno para piel y articulaciones."},{id:"1002",slug:"omega-3-1000mg",nombre:"Omega 3 1000mg",marca:"Natural Be",categoria:"omega",precio:4e4,tags:["corazon","cerebro"],descripcion_corta:"EPA/DHA para salud cardiovascular."},{id:"1003",slug:"biotina-5000mcg",nombre:"Biotina 5000mcg",marca:"Natural Be",categoria:"vitaminas",precio:28e3,tags:["cabello","unas"],descripcion_corta:"Biotina para cabello y unas."},{id:"1004",slug:"magnesio-quelado",nombre:"Magnesio Quelado",marca:"Natural Be",categoria:"minerales",precio:32e3,tags:["estres","sueno"],descripcion_corta:"Apoyo para relajacion y descanso."},{id:"1005",slug:"vitamina-c-zinc",nombre:"Vitamina C + Zinc",marca:"Natural Be",categoria:"inmunidad",precio:3e4,tags:["defensas"],descripcion_corta:"Refuerzo diario para inmunidad."},{id:"1006",slug:"ginseng-energia",nombre:"Ginseng Energia",marca:"Natural Be",categoria:"energia",precio:35e3,tags:["energia","rendimiento"],descripcion_corta:"Energia sostenida para el dia."},{id:"1007",slug:"multivitaminico-diario",nombre:"Multivitaminico Diario",marca:"Natural Be",categoria:"vitaminas",precio:45e3,tags:["energia"],descripcion_corta:"Vitaminas esenciales para la rutina."},{id:"1008",slug:"omega-3-epa-dha",nombre:"Omega 3 EPA DHA",marca:"Natural Be",categoria:"omega",precio:42e3,tags:["corazon"],descripcion_corta:"Soporte cardiovascular premium."},{id:"1009",slug:"colageno-mas-biotina",nombre:"Colageno + Biotina",marca:"Natural Be",categoria:"colageno",precio:38e3,tags:["piel","cabello"],descripcion_corta:"Formula para piel y cabello."},{id:"1010",slug:"zinc-picolinato",nombre:"Zinc Picolinato",marca:"Natural Be",categoria:"minerales",precio:26e3,tags:["inmunidad"],descripcion_corta:"Zinc de alta absorcion."}];let i=null;function e(a){if(!a)return null;const o=Number(a.precio||a.price||0),i=null!=a.precio_oferta&&!isNaN(a.precio_oferta),e=i?Number(a.precio_oferta):null,r=a.categoria||a.category||"otros",n=a.product_id||a.productId||"",t=a.slug||"",c=window.location&&"file:"===window.location.protocol,s=c?"./":window.NB_BASE_PATH||(window.location&&window.location.pathname?window.location.pathname.replace(/[^/]*$/,"/"):"/"),l=c?"./static/img/placeholder.webp":`${s.replace(/\/?$/,"/")}static/img/placeholder.webp`,d=a=>{if(!a)return"";if(/^https?:\/\//i.test(a))return a;if(/^[a-zA-Z]:[\\/]/.test(a))return a;if(c&&a.startsWith("/"))return`.${a}`;if(a.startsWith("//"))return`/${a.replace(/^\/+/,"")}`;if(a.startsWith("/"))return a;const o=String(a).replace(/^\.?\//,"");return`${s}${o}`},u=d(a.imagen_principal||a.image||l||""),p=d(a.imagen_principal_webp||(/\.(webp)(\?.*)?$/i.test(u)?u:"")||""),g=/\.webp(\?.*)?$/i.test(p)?p:"",_=u||l||"",m=(a.badge||"").toString(),w=m.toLowerCase(),f=!!(a.isPopular||w.includes("vendido")||w.includes("popular")),b=!(!a.isNew&&!w.includes("nuevo")),C=!!a.es_pack,R=Array.isArray(a.pack_items)?a.pack_items.map(String):Array.isArray(a.packItems)?a.packItems.map(String):[];return{id:null!=a.id?String(a.id):"",slug:t,nombre:a.nombre||a.name||"",marca:a.marca||a.proveedor||"Natural Be",categoria:r,subcategoria:a.subcategoria||null,presentacion:a.presentacion||"",precio:o,precio_oferta:e,moneda:a.moneda||"COP",es_pack:C,es_2x1:!!a.es_2x1,pack_items:R,packItems:R,tags:a.tags||[],beneficios_bullet:a.beneficios_bullet||a.beneficios||[],descripcion_corta:a.descripcion_corta||a.description||"",descripcion_larga:a.descripcion_larga||"",dosis_recomendada:a.dosis_recomendada||a.modo_uso||"",imagen_principal:_,imagen_principal_webp:g,disponible:!1!==a.disponible,badge:m||(f?"mas vendido":null),badgeLabel:m||(f?"Mas vendido":null),isPopular:f,isNew:b,isPack:C,stock_bajo:!!a.stock_bajo,seo_title:a.seo_title||"",seo_description:a.seo_description||"",rating_value:Number(a.rating_value||0),rating_count:Number(a.rating_count||0),url:a.url||a.link||(t?`${s}product.html?slug=${encodeURIComponent(t)}`:`${s}product.html`),product_id:n,name:a.nombre||a.name||"",price:o,offerType:a.es_2x1?"2x1":C?"pack":null,discountPercent:i&&o?Math.max(0,Math.round(100*(1-e/o))):0,image:_,description:a.descripcion_corta||a.description||"",category:r,raw:a}}function r(){return o.map(e).filter(Boolean)}function n(){const o=window.NB_DATA_VERSION||"1";return a.map(a=>`${a}?v=${o}`)}async function t(a={}){if(i&&!a.force)return i;if(a.force&&(i=null),window.location&&"file:"===window.location.protocol){const a=r();return window.NB_CATALOG_ERROR=!0,window.NB_CATALOG_SOURCE="fallback",window.NB_CATALOG_ERROR_MESSAGE="Catalogo no disponible en file://",window.ALL_PRODUCTS=a,window.PRODUCTS=a,window.PRODUCTS_BY_ID={},window.PRODUCTS_BY_SLUG={},a.forEach(a=>{a.id&&(window.PRODUCTS_BY_ID[a.id]=a),a.slug&&(window.PRODUCTS_BY_SLUG[a.slug]=a)}),Promise.resolve(a)}const o=n();return i=async function(a){let o=null;for(const i of a)try{const a=await fetch(i,{cache:"force-cache"});if(!a.ok)throw new Error(`Catalog fetch failed: ${a.status}`);const o=await a.json();if(!Array.isArray(o))throw new Error("Catalog payload is not an array");return o}catch(a){o=a}throw o||new Error("Catalog fetch failed")}(o).then(a=>a.map(e).filter(Boolean)).then(a=>(window.NB_CATALOG_ERROR=!1,window.NB_CATALOG_SOURCE="remote",window.NB_CATALOG_ERROR_MESSAGE="",window.ALL_PRODUCTS=a,window.PRODUCTS=a,window.PRODUCTS_BY_ID={},window.PRODUCTS_BY_SLUG={},a.forEach(a=>{a.id&&(window.PRODUCTS_BY_ID[a.id]=a),a.slug&&(window.PRODUCTS_BY_SLUG[a.slug]=a)}),a)).catch(a=>{console.error("Error cargando catalogo",a);const o=r();return window.NB_CATALOG_ERROR=!0,window.NB_CATALOG_SOURCE="fallback",window.NB_CATALOG_ERROR_MESSAGE="No pudimos cargar el catalogo.",window.ALL_PRODUCTS=o,window.PRODUCTS=o,window.PRODUCTS_BY_ID={},window.PRODUCTS_BY_SLUG={},o.forEach(a=>{a.id&&(window.PRODUCTS_BY_ID[a.id]=a),a.slug&&(window.PRODUCTS_BY_SLUG[a.slug]=a)}),o}),i}window.loadProductsData=t,window.retryCatalogLoad=function(){return t({force:!0})},window.dispatchEvent(new CustomEvent("ProductsDataReady"))}();